!function(){"use strict";var e="undefined"==typeof global?self:global;if("function"!=typeof e.require){var t={},n={},r={},i={}.hasOwnProperty,o=/^\.\.?(\/|$)/,a=function(e,t){for(var n,r=[],i=(o.test(t)?e+"/"+t:t).split("/"),a=0,u=i.length;a<u;a++)".."===(n=i[a])?r.pop():"."!==n&&""!==n&&r.push(n);return r.join("/")},u=function(e){return e.split("/").slice(0,-1).join("/")},s=function(t,r){var i,o={id:t,exports:{},hot:d&&d.createHot(t)};return n[t]=o,r(o.exports,(i=t,function(t){var n=a(u(i),t);return e.require(n,i)}),o),o.exports},c=function(e){var t=r[e];return t&&e!==t?c(t):e},l=function(e,r){null==r&&(r="/");var o=c(e);if(i.call(n,o))return n[o].exports;if(i.call(t,o))return s(o,t[o]);throw new Error("Cannot find module '"+e+"' from '"+r+"'")};l.alias=function(e,t){r[t]=e};var f=/\.[^.\/]+$/,v=/\/index(\.[^\/]+)?$/;l.register=l.define=function(e,o){if(e&&"object"==typeof e)for(var a in e)i.call(e,a)&&l.register(a,e[a]);else t[e]=o,delete n[e],function(e){if(f.test(e)){var t=e.replace(f,"");i.call(r,t)&&r[t].replace(f,"")!==t+"/index"||(r[t]=e)}if(v.test(e)){var n=e.replace(v,"");i.call(r,n)||(r[n]=e)}}(e)},l.list=function(){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};var d=e._hmr&&new e._hmr(function(e,t){return c(a(u(e),t))},l,t,n);l._cache=n,l.hmr=d&&d.wrap,l.brunch=!0,e.require=l}}(),function(){"undefined"==typeof window||window;var e=function(e,t,n){var r={},i=function(t,n){try{return e(n+"/node_modules/"+t)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==n.indexOf("node_modules")){var o=n.split("/"),a=o.lastIndexOf("node_modules"),u=o.slice(0,a).join("/");return i(t,u)}}return r};return function(o){if(o in t&&(o=t[o]),o){if("."!==o[0]&&n){var a=i(o,n);if(a!==r)return a}return e(o)}}};require.register("curvature/base/Bag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bag=void 0;var r=n("./Bindable"),i=n("./Mixin"),o=n("../mixin/EventTargetMixin");function a(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=c(t);if(n){var o=c(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(this,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=Symbol("Mapped"),f=Symbol("Has"),v=Symbol("Add"),d=Symbol("Remove"),p=Symbol("Delete"),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(b,i.Mixin["with"](o.EventTargetMixin));var t,n,c,y=s(b);function b(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(e=y.call(this)).changeCallback=t,e.content=new Map,e.current=0,e.length=0,e.list=r.Bindable.makeBindable([]),e.meta=Symbol("meta"),e.type=void 0,e}return t=b,(n=[{key:"has",value:function(e){return this[l]?this[l].has(e):this[f](e)}},{key:f,value:function(e){return this.content.has(e)}},{key:"add",value:function(e){return this[l]?this[l].add(e):this[v](e)}},{key:v,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be added to Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be added to this Bag."));if(e=r.Bindable.make(e),!this.content.has(e)){var t=new CustomEvent("adding",{detail:{item:e}});if(this.dispatchEvent(t)){var n,i=(n=this.current++,Number(n));this.content.set(e,i),this.list[i]=e,this.changeCallback&&this.changeCallback(e,this.meta,b.ITEM_ADDED,i);var o=new CustomEvent("added",{detail:{item:e,id:i}});return this.dispatchEvent(o),this.length=this.size,i}}}},{key:"remove",value:function(e){return this[l]?this[l].remove(e):this[d](e)}},{key:d,value:function(e){if(void 0===e||!(e instanceof Object))throw new Error("Only objects may be removed from Bags.");if(this.type&&!(e instanceof this.type))throw console.error(this.type,e),new Error("Only objects of type ".concat(this.type," may be removed from this Bag."));if(e=r.Bindable.make(e),!this.content.has(e))return this.changeCallback&&this.changeCallback(e,this.meta,0,void 0),!1;var t=new CustomEvent("removing",{detail:{item:e}});if(this.dispatchEvent(t)){var n=this.content.get(e);delete this.list[n],this.content.delete(e),this.changeCallback&&this.changeCallback(e,this.meta,b.ITEM_REMOVED,n);var i=new CustomEvent("removed",{detail:{item:e,id:n}});return this.dispatchEvent(i),this.length=this.size,e}}},{key:"delete",value:function(e){if(this[l])return this[l].delete(e);this[p](e)}},{key:p,value:function(e){this.remove(e)}},{key:"map",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=new WeakMap,r=new b;return r[l]=this,this.addEventListener("added",function(i){var o=i.detail.item;if(t(o)&&!n.has(o)){var a=e(o);n.set(o,a),r[v](a)}}),this.addEventListener("removed",function(e){var t=e.detail.item;if(n.has(t)){var i=n.get(t);n.delete(t),r[d](i)}}),r}},{key:"size",get:function(){return this.content.size}},{key:"items",value:function(){return Array.from(this.content.entries()).map(function(e){return e[0]})}}])&&a(t.prototype,n),c&&a(t,c),Object.defineProperty(t,"prototype",{writable:!1}),b}();t.Bag=y,Object.defineProperty(y,"ITEM_ADDED",{configurable:!1,enumerable:!1,writable:!0,value:1}),Object.defineProperty(y,"ITEM_REMOVED",{configurable:!1,enumerable:!1,writable:!0,value:-1})}()}),require.register("curvature/base/Bindable.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t,r,i){return(e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,r){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return r&&n(o,r.prototype),o}).apply(null,arguments)}function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function c(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Bindable=void 0;var f=Symbol("ref"),v=Symbol("original"),d=Symbol("deck"),p=Symbol("binding"),y=Symbol("subBinding"),b=Symbol("bindingAll"),h=Symbol("isBindable"),m=Symbol("wrapping"),g=Symbol("Names"),w=Symbol("executing"),S=Symbol("stack"),j=(Symbol("object"),Symbol("wrapped")),k=Symbol("unwrapped"),O=Symbol("getProto"),P=Symbol("onGet"),E=Symbol("onAllGet"),A=Symbol("bindChain"),T=Symbol("Descriptors"),_=Symbol("Before"),C=Symbol("After"),R=Symbol("NoGetters"),x=Object.getPrototypeOf(Int8Array),B=Set.prototype[Symbol.iterator],N=Map.prototype[Symbol.iterator],M=globalThis,D=[M.Node,M.File,M.Map,M.Set,M.WeakMap,M.WeakSet,M.ArrayBuffer,M.ResizeObserver,M.MutationObserver,M.PerformanceObserver,M.IntersectionObserver,M.IDBCursor,M.IDBCursorWithValue,M.IDBDatabase,M.IDBFactory,M.IDBIndex,M.IDBKeyRange,M.IDBObjectStore,M.IDBOpenDBRequest,M.IDBRequest,M.IDBTransaction,M.IDBVersionChangeEvent,M.Event,M.CustomEvent,M.FileSystemFileHandle].filter(function(e){return"function"==typeof e}),I=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,o,a;return n=t,a=[{key:"isBindable",value:function(e){return!(!e||!e[h])&&e[h]===t}},{key:"onDeck",value:function(e,t){return e[d][t]||!1}},{key:"ref",value:function(e){return e[f]||e||!1}},{key:"makeBindable",value:function(e){return this.make(e)}},{key:"shuck",value:function(e,n){n=n||new Map;var r={};if(e instanceof x||e instanceof ArrayBuffer){var i=e.slice(0);return n.set(e,i),i}var o=Object.keys(e);for(var a in o){var s=o[a];if("___"!==s.substring(0,3)){var c=n.get(e[s]);if(c)r[s]=c;else if(e[s]!==e){if(e[s]&&"object"===u(e[s])){var l=e[s];t.isBindable(e[s])&&(l=e[s][v]),r[s]=this.shuck(l,n)}else r[s]=e[s];n.set(e[s],r[s])}else n.set(e[s],r),r[s]=r}}return t.isBindable(e)&&(delete r.bindTo,delete r.isBound),r}},{key:"make",value:function(n){var o=this;if(!n||!["function","object"].includes(u(n)))return n;if(n[f])return n[f];if(n[h])return n;if(Object.isSealed(n)||Object.isFrozen(n)||!Object.isExtensible(n)||D.filter(function(e){return n instanceof e}).length)return n;Object.defineProperty(n,h,{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(n,f,{configurable:!0,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(n,v,{configurable:!1,enumerable:!1,writable:!1,value:n}),Object.defineProperty(n,d,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,p,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,y,{configurable:!1,enumerable:!1,writable:!1,value:new Map}),Object.defineProperty(n,b,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,w,{enumerable:!1,writable:!0}),Object.defineProperty(n,m,{enumerable:!1,writable:!0}),Object.defineProperty(n,S,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,_,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,C,{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(n,j,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)}),Object.defineProperty(n,k,{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(n,T,{configurable:!1,enumerable:!1,writable:!1,value:Object.preventExtensions(new Map)});Object.defineProperty(n,"bindTo",{configurable:!1,enumerable:!1,writable:!1,value:function e(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=!1;if(Array.isArray(r)){var c=r.map(function(t){return e(t,i,a)});return function(){return c.forEach(function(e){return e()})}}if(r instanceof Function&&(a=i||{},i=r,s=!0),a.delay>=0&&(i=o.wrapDelayCallback(i,a.delay)),a.throttle>=0&&(i=o.wrapThrottleCallback(i,a.throttle)),a.wait>=0&&(i=o.wrapWaitCallback(i,a.wait)),a.frame&&(i=o.wrapFrameCallback(i,a.frame)),a.idle&&(i=o.wrapIdleCallback(i)),s){var l=n[b].length;if(n[b].push(i),!("now"in a)||a.now)for(var f in n)i(n[f],f,n,!1);return function(){delete n[b][l]}}if(n[p][r]||(n[p][r]=new Set),a.children){var v=i;i=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=r[0],s=n[y].get(v);if(s&&(n[y].delete(v),s()),"object"===u(o)){var c=t.make(o);t.isBindable(c)&&n[y].set(v,c.bindTo(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.apply(void 0,r.concat(t))},Object.assign({},a,{children:!1}))),v.apply(void 0,r)}else v.apply(void 0,r)}}n[p][r].add(i),"now"in a&&!a.now||i(n[r],r,n,!1);var d=function(){var e=n[y].get(i);e&&(n[y].delete(i),e()),n[p][r]&&n[p][r].has(i)&&n[p][r].delete(i)};return a.removeWith&&a.removeWith instanceof View&&a.removeWith.onRemove(function(){return d}),d}});Object.defineProperty(n,A,{configurable:!1,enumerable:!1,writable:!1,value:function(e,t){var r=e.split("."),i=r.shift(),a=r.slice(0),u=[];return u.push(n.bindTo(i,function(e,n,r,i){var s=a.join(".");0!==a.length?(void 0===e&&(e=r[n]=o.make({})),u=u.concat(e[A](s,t))):t(e,n,r,i)})),function(){return u.forEach(function(e){return e()})}}}),Object.defineProperty(n,"___before",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=n[_].length;n[_].push(e);var r=!1;return function(){r||(r=!0,delete n[_][t])}}}),Object.defineProperty(n,"___after",{configurable:!1,enumerable:!1,writable:!1,value:function(e){var t=n[C].length;n[C].push(e);var r=!1;return function(){r||(r=!0,delete n[C][t])}}});Object.defineProperty(n,"isBound",{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var e in n[b])if(n[b][e])return!0;for(var t in n[p]){var r,o=i(n[p][t]);try{for(o.s();!(r=o.n()).done;)if(r.value)return!0}catch(e){o.e(e)}finally{o.f()}}return!1}});var a=function(e){n[e]&&n[e]instanceof Object&&!n[e]instanceof Promise&&(D.filter(function(t){return n[e]instanceof t}).length||!Object.isExtensible(n[e])||Object.isSealed(n[e])||(n[e]=t.make(n[e])))};for(var s in n)a(s);var c=n[T],l=n[j],M=n[S],I={get:function(r,o){if(l.has(o))return l.get(o);if(o===f||o===v||"apply"===o||"isBound"===o||"bindTo"===o||"__proto__"===o||"constructor"===o)return n[o];var a;if(c.has(o)?a=c.get(o):(a=Object.getOwnPropertyDescriptor(n,o),c.set(o,a)),a&&!a.configurable&&!a.writable)return n[o];if(E in n)return n[E](o);if(P in n&&!(o in n))return n[P](o);if(a&&!a.configurable&&!a.writable)return l.set(o,n[o]),n[o];if("function"==typeof n[o]){if(g in n[o])return n[o];Object.defineProperty(n[k],o,{configurable:!1,enumerable:!1,writable:!0,value:n[o]});var u=Object.getPrototypeOf(n)[o]===n[o],s="function"==typeof Promise&&n instanceof Promise||"function"==typeof Map&&n instanceof Map||"function"==typeof Set&&n instanceof Set||"function"==typeof N&&n.prototype===N||"function"==typeof B&&n.prototype===B||"function"==typeof B&&n.prototype===B||"function"==typeof WeakMap&&n instanceof WeakMap||"function"==typeof WeakSet&&n instanceof WeakSet||"function"==typeof Date&&n instanceof Date||"function"==typeof x&&n instanceof x||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||"function"==typeof EventTarget&&n instanceof EventTarget||"function"==typeof ResizeObserver&&n instanceof ResizeObserver||"function"==typeof MutationObserver&&n instanceof MutationObserver||"function"==typeof PerformanceObserver&&n instanceof PerformanceObserver||"function"==typeof IntersectionObserver&&n instanceof IntersectionObserver||"function"==typeof n[Symbol.iterator]&&"next"===o?n:n[f],d=function(){n[w]=o,M.unshift(o);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var c,l,f=i(n[_]);try{for(f.s();!(c=f.n()).done;)(0,c.value)(n,o,M,n,r)}catch(e){f.e(e)}finally{f.f()}if(new.target)l=e(n[k][o],r);else{var v=n[k][o];l=u?v.apply(s||n,r):v.apply(void 0,r)}var d,p=i(n[C]);try{for(p.s();!(d=p.n()).done;)(0,d.value)(n,o,M,n,r)}catch(e){p.e(e)}finally{p.f()}return n[w]=null,M.shift(),l};(d[g]=d[g]||new WeakMap).set(n,o),d[E]=function(e){var t=d[g].get(n);return n[t][e]};var p=t.make(d);return l.set(o,p),p}return n[o]},set:function(e,r,o){if(l.has(r)&&l.delete(r),r===v)return!0;var a=n[d];if(r in a&&a[r]===o)return!0;if(r.slice&&"___"===r.slice(-3))return!0;if(e[r]===o||"number"==typeof o&&isNaN(a[r])&&isNaN(o))return!0;for(var u in o&&o instanceof Object&&(D.filter(function(e){return n instanceof e}).length||!Object.isExtensible(n)||Object.isSealed(n)||(n[R],o=t.make(o))),a[r]=o,n[b])n[b][u]&&n[b][u](o,r,e,!1);var s=!1;if(r in n[p]){var c,f=i(n[p][r]);try{for(f.s();!(c=f.n()).done;)!1===(0,c.value)(o,r,e,!1,e[r])&&(s=!0)}catch(e){f.e(e)}finally{f.f()}}if(delete a[r],!s){var y=Object.getOwnPropertyDescriptor(e,r);e instanceof File&&"lastModifiedDate"==r||y&&!y.writable||e[r]!==o||(e[r]=o)}var h=Reflect.set(e,r,o);if(Array.isArray(e)&&n[p].length)for(var m in n[p].length)(0,n[p].length[m])(e.length,"length",e,!1,e.length);return h},construct:function(i,o){var a="constructor";for(var u in i[_])i[_][u](i,a,n[S],void 0,o);var s=t.make(e(i[v],r(o)));for(var c in i[C])i[C][c](i,a,n[S],s,o);return s},getPrototypeOf:function(e){return O in n?n[O]:Reflect.getPrototypeOf(e)},deleteProperty:function(e,t){var r=n[d];if(void 0!==r[t])return!0;if(!(t in e))return!0;if(c.has(t)){var o=c.get(t);if(o&&!o.configurable)return!1;c.delete(t)}for(var a in r[t]=null,l.has(t)&&l.delete(t),n[b])n[b][a](void 0,t,e,!0,e[t]);if(t in n[p]){var u,s=i(n[p][t]);try{for(s.s();!(u=s.n()).done;)(0,u.value)(void 0,t,e,!0,e[t])}catch(e){s.e(e)}finally{s.f()}}return delete r[t],delete e[t],!0}};return n[R]&&delete I.get,Object.defineProperty(n,f,{configurable:!1,enumerable:!1,writable:!1,value:new Proxy(n,I)}),n[f]}},{key:"clearBindings",value:function(e){var t;(t=function(e){return Object.keys(e).map(function(t){return delete e[t]})},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.map(t)})(e[j],e[p],e[b],e[C],e[_])}},{key:"resolve",value:function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.split("."),o=i[0];i.length;){if(r&&1===i.length)return[this.make(e),i.shift(),o];!(!(n=i.shift())in e)&&e[n]&&e[n]instanceof Object||(e[n]={}),e=this.make(e[n])}return[this.make(e),n,o]}},{key:"wrapDelayCallback",value:function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return setTimeout(function(){return e.apply(void 0,r)},t)}}},{key:"wrapThrottleCallback",value:function(e,t){var n=this;return this.throttles.set(e,!1),function(){n.throttles.get(e,!0)||(e.apply(void 0,arguments),n.throttles.set(e,!0),setTimeout(function(){n.throttles.set(e,!1)},t))}}},{key:"wrapWaitCallback",value:function(e,t){var n=this;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a;(a=n.waiters.get(e))&&(n.waiters.delete(e),clearTimeout(a)),a=setTimeout(function(){return e.apply(void 0,i)},t),n.waiters.set(e,a)}}},{key:"wrapFrameCallback",value:function(e,t){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];requestAnimationFrame(function(){return e.apply(void 0,n)})}}},{key:"wrapIdleCallback",value:function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(window.requestIdleCallback||requestAnimationFrame)(function(){return e.apply(void 0,n)})}}}],(o=null)&&s(n.prototype,o),a&&s(n,a),Object.defineProperty(n,"prototype",{writable:!1}),t}();t.Bindable=I,c(I,"waiters",new WeakMap),c(I,"throttles",new WeakMap),Object.defineProperty(I,"OnGet",{configurable:!1,enumerable:!1,writable:!1,value:P}),Object.defineProperty(I,"NoGetters",{configurable:!1,enumerable:!1,writable:!1,value:R}),Object.defineProperty(I,"GetProto",{configurable:!1,enumerable:!1,writable:!1,value:O}),Object.defineProperty(I,"OnAllGet",{configurable:!1,enumerable:!1,writable:!1,value:E})}()}),require.register("curvature/base/Cache.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function n(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Cache=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,i=[{key:"store",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"standard",i=0;n&&(i=1e3*n+(new Date).getTime()),this.buckets||(this.buckets=new Map),this.buckets.has(r)||this.buckets.set(r,new Map);var o=new CustomEvent("cvCacheStore",{cancelable:!0,detail:{key:e,value:t,expiry:n,bucket:r}});document.dispatchEvent(o)&&this.buckets.get(r).set(e,{value:t,expiration:i})}},{key:"load",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"standard",r=new CustomEvent("cvCacheLoad",{cancelable:!0,detail:{key:e,defaultvalue:t,bucket:n}});if(!document.dispatchEvent(r))return t;if(this.buckets&&this.buckets.has(n)&&this.buckets.get(n).has(e)){var i=this.buckets.get(n).get(e);if(0===i.expiration||i.expiration>(new Date).getTime())return this.buckets.get(n).get(e).value}return t}}],(r=null)&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Cache=r}()}),require.register("curvature/base/Config.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function r(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;var i={},o=n;try{i=o("/Config").Config||{}}catch(e){!0===globalThis.devMode&&console.error(e)}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"get",value:function(e){return this.configs[e]}},{key:"set",value:function(e,t){return this.configs[e]=t,this}},{key:"dump",value:function(){return this.configs}},{key:"init",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r in t){var i=t[r];for(var o in"string"==typeof i&&(i=JSON.parse(i)),i){var a=i[o];return this.configs[o]=a}}return this}}],(n=null)&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Config=a,Object.defineProperty(a,"configs",{configurable:!1,enumerable:!1,writable:!1,value:i})}()}),require.register("curvature/base/Dom.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function n(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Dom=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,i=[{key:"mapTags",value:function(e,t,n,r,i){var o=[],a=!0;r&&(a=!1);var u=!1,s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,{acceptNode:function(e,n){if(!a){if(e!==r)return NodeFilter.FILTER_SKIP;a=!0}return i&&e===i&&(u=!0),u?NodeFilter.FILTER_SKIP:t?e instanceof Element&&e.matches(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1);for(0;s.nextNode();)o.push(n(s.currentNode,s));return o}},{key:"dispatchEvent",value:function(t,n){t.dispatchEvent(n),e.mapTags(t,!1,function(e){e.dispatchEvent(n)})}}],(r=null)&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Dom=r}()}),require.register("curvature/base/Mixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=void 0;var e=n("./Bindable");function r(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,void 0,"symbol"===i(a=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),r)}var o,a}function y(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var b=Symbol("constructor"),h=(Symbol("mixinList"),function(){function t(){d(this,t)}return y(t,null,[{key:"from",value:function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var a=c(u);function u(){var n;d(this,u);for(var s=arguments.length,c=new Array(s),v=0;v<s;v++)c[v]=arguments[v];var p,y=e.constructor?n=a.call.apply(a,[this].concat(c)):null,b=o(r);try{for(b.s();!(p=b.n()).done;){var h=p.value;switch(h[t.Constructor]&&h[t.Constructor].apply(f(n)),i(h)){case"function":t.mixClass(h,u);break;case"object":t.mixObject(h,f(n))}}}catch(e){b.e(e)}finally{b.f()}return l(n,y)}return y(u)}()}},{key:"make",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.pop();return t.to.apply(t,[i].concat(n))}},{key:"to",value:function(e){for(var t={},n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];r.map(function(n){switch(i(n)){case"object":Object.assign(t,Object.getOwnPropertyDescriptors(n));break;case"function":Object.assign(t,Object.getOwnPropertyDescriptors(n.prototype))}delete t.constructor,Object.defineProperties(e.prototype,t)})}},{key:"with",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.from.apply(this,[function(){return y(function e(){d(this,e)})}()].concat(t))}},{key:"mixObject",value:function(e,t){var n,r=o(Object.getOwnPropertyNames(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;"function"!=typeof e[i]?t[i]=e[i]:t[i]=e[i].bind(t)}}catch(e){r.e(e)}finally{r.f()}var a,u=o(Object.getOwnPropertySymbols(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;"function"!=typeof e[s]?t[s]=e[s]:t[s]=e[s].bind(t)}}catch(e){u.e(e)}finally{u.f()}}},{key:"mixClass",value:function(e,t){var n,r=o(Object.getOwnPropertyNames(e.prototype));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!["name","prototype","length"].includes(i)){var a=Object.getOwnPropertyDescriptor(t,i);a&&!a.writable||("function"==typeof e[i]?t.prototype[i]=e.prototype[i].bind(t.prototype):t.prototype[i]=e.prototype[i])}}}catch(e){r.e(e)}finally{r.f()}var u,s=o(Object.getOwnPropertySymbols(e.prototype));try{for(s.s();!(u=s.n()).done;){var c=u.value;"function"==typeof e[c]?t.prototype[c]=e.prototype[c].bind(t.prototype):t.prototype[c]=e.prototype[c]}}catch(e){s.e(e)}finally{s.f()}var l,f=o(Object.getOwnPropertyNames(e));try{var v=function(){var n=l.value;if(["name","prototype","length"].includes(n))return"continue";var r=Object.getOwnPropertyDescriptor(t,n);if(r&&!r.writable)return"continue";if("function"!=typeof e[n])return t[n]=e[n],"continue";var i=t[n]||!1,o=e[n].bind(t);t[n]=function(){return i&&i.apply(void 0,arguments),o.apply(void 0,arguments)}};for(f.s();!(l=f.n()).done;)v()}catch(e){f.e(e)}finally{f.f()}var d,p=o(Object.getOwnPropertySymbols(e));try{var y=function(){var n=d.value;if("function"!=typeof e[n])return t.prototype[n]=e[n],"continue";var r=t[n]||!1,i=e[n].bind(t);t[n]=function(){return r&&r.apply(void 0,arguments),i.apply(void 0,arguments)}};for(p.s();!(d=p.n()).done;)y()}catch(e){p.e(e)}finally{p.f()}}},{key:"mix",value:function(t){for(var n={},i={},a=e.Bindable.makeBindable(t),u=function(e){var t,u=Object.getOwnPropertyNames(e.prototype),s=/^(before|after)__(.+)/,c=o(Object.getOwnPropertyNames(e));try{var l=function(){var i=t.value,o=i.match(s);if(o){switch(o[1]){case"before":a.___before(function(t,n,a,u,s){if(n===o[2])return e[i].bind(u).apply(void 0,r(s))});break;case"after":a.___after(function(t,n,a,u,s){if(n===o[2])return e[i].bind(u).apply(void 0,r(s))})}return"continue"}return n[i]?"continue":"function"!=typeof e[i]?"continue":void(n[i]=e[i])};for(c.s();!(t=c.n()).done;)l()}catch(e){c.e(e)}finally{c.f()}var f,v=o(u);try{var d=function(){var t=f.value,n=t.match(s);if(n){switch(n[1]){case"before":a.___before(function(i,o,a,u,s){if(o===n[2])return e.prototype[t].bind(u).apply(void 0,r(s))});break;case"after":a.___after(function(i,o,a,u,s){if(o===n[2])return e.prototype[t].bind(u).apply(void 0,r(s))})}return"continue"}return i[t]?"continue":"function"!=typeof e.prototype[t]?"continue":void(i[t]=e.prototype[t])};for(v.s();!(f=v.n()).done;)d()}catch(e){v.e(e)}finally{v.f()}},s=this;s&&s.prototype;s=Object.getPrototypeOf(s))u(s);for(var c in n)t[c]=n[c].bind(t);var l=function(e){t.prototype[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return i[e].apply(this,n)}};for(var f in i)l(f);return a}}]),t}());t.Mixin=h,h.Constructor=b}()}),require.register("curvature/base/Router.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0;var e,r=n("./View"),i=(n("./Cache"),n("./Config")),o=n("./Routes");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){"@babel/helpers - typeof";return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,void 0,"symbol"===l(o=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),r)}var i,o}var v=Symbol("NotFound"),d=Symbol("Internal");globalThis.CustomEvent=null!==(e=globalThis.CustomEvent)&&void 0!==e?e:globalThis.Event;var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,s=[{key:"wait",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DOMContentLoaded";(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).addEventListener(n,function(){t.listen(e)})}},{key:"listen",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.listener=e||this.listener,this.routes=n||e.routes,Object.assign(this.query,this.queryOver({}));var r=function(n){n.preventDefault(),n.state&&"routedId"in n.state?(n.state.routedId<=t.routeCount?(t.history.splice(n.state.routedId),t.routeCount=n.state.routedId):n.state.routedId>t.routeCount&&(t.history.push(n.state.prev),t.routeCount=n.state.routedId),t.state=n.state):null!==t.prevPath&&t.prevPath!==location.pathname&&t.history.push(t.prevPath),"null"!==location.origin?t.match(location.pathname,e):t.match(t.nextPath,e)};window.addEventListener("cvUrlChanged",r),window.addEventListener("popstate",r);var i="null"!==location.origin&&location.pathname+location.search;location.origin&&location.hash&&(i+=location.hash);var o={routedId:this.routeCount,url:location.pathname,prev:this.prevPath};"null"!==location.origin&&history.replaceState(o,null,location.pathname),this.go(!1!==i?i:"/")}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=i.Config.get("title");n&&(document.title=n);var r={routedId:this.routeCount,prev:this.prevPath,url:location.pathname};-1===t?this.match(e,this.listener,!0):"null"===location.origin?this.nextPath=e:2===t&&location.pathname!==e?history.replaceState(r,null,e):location.pathname!==e&&history.pushState(r,null,e),(!t||t<0)&&(!1===t&&(this.path=null),t||("#"===e.substring(0,1)?window.dispatchEvent(new HashChangeEvent("hashchange")):window.dispatchEvent(new CustomEvent("cvUrlChanged")))),this.prevPath=e}},{key:"processRoute",value:function(e,t,n){return"function"==typeof e[t]?e[t].prototype instanceof r.View?new e[t](n):e[t](n):e[t]}},{key:"handleError",value:function(e,t,n,r,i,o,a,u){console.error(e),"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("cvRouteError",{detail:{error:e,path:o,prev:a,view:i,routes:t,selected:n}}));var s=globalThis.devMode?"Unexpected error: "+String(e):"Unexpected error.";t[d]&&(r[d]=e,s=this.processRoute(t,d,r)),this.update(i,o,s,t,n,r,u)}},{key:"match",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null,s=!1;if(!0===r&&(s=r),r&&"object"===l(r)&&(s=r.forceRefresh,i=r.event),"undefined"==typeof document||this.path!==e||s){var c="http://example.com";"undefined"!=typeof document&&(c="null"!==location.origin?location.origin:c,this.queryString=location.search);var f=new URL(e,c);e=this.path=f.pathname,"undefined"==typeof document&&(this.queryString=f.search);var d=this.prevPath,p=t&&t.args?t.args.content:null,y=this.routes||t&&t.routes||o.Routes.dump(),b=new URLSearchParams(this.queryString);for(var h in i&&i.request&&(this.request=i.request),Object.keys(this.query))delete this.query[h];var m,g=u(b);try{for(g.s();!(m=g.n()).done;){var w=a(m.value,2),S=w[0],j=w[1];this.query[S]=j}}catch(e){g.e(e)}finally{g.f()}var k={},O=!1,P="";for(var E in"/"===e.substring(0,1)&&(e=e.substring(1)),e=e.split("/"),this.query)k[E]=this.query[E];e:for(var A in y){var T=A.split("/");if(!(T.length<e.length&&"*"!==T[T.length-1])){for(var _ in T)if("%"==T[_].substr(0,1)){var C=null,R=/^%(\w+)\??/.exec(T[_]);if(R&&R[1]&&(C=R[1]),!C)throw new Error("".concat(T[_],' is not a valid argument segment in route "').concat(A,'"'));if(e[_])k[C]=e[_];else{if("?"!=T[_].substr(T[_].length-1,1))continue e;k[C]=""}}else if("*"!==T[_]&&e[_]!==T[_])continue e;O=A,P=y[A],"*"===T[T.length-1]&&(k.pathparts=e.slice(T.length-1));break}}var x=new CustomEvent("cvRouteStart",{cancelable:!0,detail:{path:e,prev:d,root:t,selected:O,routes:y}});if("undefined"==typeof document||document.dispatchEvent(x)){if(!s&&t&&p&&P instanceof Object&&p instanceof P&&!(P instanceof Promise)&&p.update(k))return t.args.content=p,!0;O in y||(y[O]=y[v]);try{return!1===(P=this.processRoute(y,O,k))&&(P=this.processRoute(y,v,k)),P instanceof Promise||(P=Promise.resolve(P)),"undefined"==typeof document?P:P.then(function(r){n.update(t,e,r,y,O,k,s)}).catch(function(r){n.handleError(r,y,O,k,t,e,d,s)})}catch(n){this.handleError(n,y,O,k,t,e,d,s)}}}}},{key:"update",value:function(e,t,n,i,o,a,u){if(e){var s=this.prevPath,c=new CustomEvent("cvRoute",{cancelable:!0,detail:{result:n,path:t,prev:s,view:e,routes:i,selected:o}});!1!==n&&(e.args.content instanceof r.View&&(e.args.content.pause(!0),e.args.content.remove()),document.dispatchEvent(c)&&(e.args.content=n),n instanceof r.View&&(n.pause(!1),n.update(a,u)));var l=new CustomEvent("cvRouteEnd",{cancelable:!0,detail:{result:n,path:t,prev:s,view:e,routes:i,selected:o}});document.dispatchEvent(l)}}},{key:"queryOver",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},r={},i=u(new URLSearchParams(location.search));try{for(i.s();!(e=i.n()).done;){var o=e.value;r[o[0]]=o[1]}}catch(e){i.e(e)}finally{i.f()}return delete(n=Object.assign(n,r,t)).api,n}},{key:"queryToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=e;for(var i in t||(r=this.queryOver(e)),r)""!==r[i]&&n.push(i+"="+encodeURIComponent(r[i]));return n.join("&")}},{key:"setQuery",value:function(e,t,n){var r=this.queryOver();r[e]=t,void 0===t&&delete r[e];var i=this.queryToString(r,!0);this.go(location.pathname+(i?"?"+i:"?"),n)}}],(n=null)&&f(t.prototype,n),s&&f(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Router=p,Object.defineProperty(p,"query",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(p,"history",{configurable:!1,enumerable:!1,writable:!1,value:[]}),Object.defineProperty(p,"routeCount",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(p,"prevPath",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(p,"queryString",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(p,"InternalError",{configurable:!1,enumerable:!1,writable:!1,value:d}),Object.defineProperty(p,"NotFoundError",{configurable:!1,enumerable:!1,writable:!1,value:v})}()}),require.register("curvature/base/Routes.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function r(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(o=i.key,void 0,"symbol"===e(a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(o,"string"))?a:String(a)),i)}var o,a}Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=void 0;var i={},o=n,a=!1,u=function(){if(!a){try{Object.assign(i,o("Routes").Routes||{})}catch(e){!0===globalThis.devMode&&console.warn(e)}a=!0}},s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,i=[{key:"get",value:function(e){return u(),this.routes[e]}},{key:"dump",value:function(){return u(),this.routes}}],(n=null)&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Routes=s,Object.defineProperty(s,"routes",{configurable:!1,enumerable:!1,writable:!1,value:i})}()}),require.register("curvature/base/RuleSet.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleSet=void 0;n("./Dom");var e=n("./Tag"),r=n("./View");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,void 0,"symbol"===i(a=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),r)}var o,a}var l=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,i,u;return n=t,u=[{key:"add",value:function(e,t){return this.globalRules=this.globalRules||{},this.globalRules[e]=this.globalRules[e]||[],this.globalRules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var n in this.globalRules)for(var r in this.globalRules[n]){var i,o=this.globalRules[n][r],u=this.wrap(e,o,t),s=a(e.querySelectorAll(n));try{for(s.s();!(i=s.n()).done;){u(i.value)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"wait",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DOMContentLoaded",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=function(t,n){return function(){return n.removeEventListener(t,r),e.apply()}}(t,n);n.addEventListener(t,r)}},{key:"wrap",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=n;return(n instanceof r.View||n&&n.prototype&&n.prototype instanceof r.View)&&(o=function(){return n}),function(t){if(void 0===t.___cvApplied___&&Object.defineProperty(t,"___cvApplied___",{enumerable:!1,writable:!1,value:new WeakSet}),!t.___cvApplied___.has(n)){var a,u;i&&(a=u=i,i.viewList&&(u=i.viewList.parent));var s,c=new e.Tag(t,u,null,void 0,a),l=c.element.parentNode,f=c.element.nextSibling,v=o(c);if(!1!==v&&t.___cvApplied___.add(n),v instanceof HTMLElement&&(v=new e.Tag(v)),v instanceof e.Tag){if(!v.element.contains(c.element)){for(;c.element.firstChild;)v.element.appendChild(c.element.firstChild);c.remove()}f?l.insertBefore(v.element,f):l.appendChild(v.element)}v&&v.prototype&&v.prototype instanceof r.View&&(v=new v({},i)),v instanceof r.View&&(i&&(i.cleanup.push((s=v,function(){s.remove()})),i.cleanup.push(i.args.bindTo(function(e,t,n){n[t]=e,v.args[t]=e})),i.cleanup.push(v.args.bindTo(function(e,t,n,r){n[t]=e,i.args[t]=e}))),c.clear(),v.render(c.element))}}}}],(i=[{key:"add",value:function(e,t){return this.rules=this.rules||{},this.rules[e]=this.rules[e]||[],this.rules[e].push(t),this}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var r in t.apply(e,n),this.rules)for(var i in this.rules[r]){var o,u=this.rules[r][i],s=t.wrap(e,u,n),c=a(e.querySelectorAll(r));try{for(c.s();!(o=c.n()).done;){s(o.value)}}catch(e){c.e(e)}finally{c.f()}}}},{key:"purge",value:function(){if(this.rules)for(var e=0,t=Object.entries(this.rules);e<t.length;e++){var n=o(t[e],2),r=n[0];n[1];if(this.rules[r])for(var i in this.rules[r])delete this.rules[r][i]}}}])&&c(n.prototype,i),u&&c(n,u),Object.defineProperty(n,"prototype",{writable:!1}),t}();t.RuleSet=l}()}),require.register("curvature/base/SetMap.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function n(e,t,i){return(n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o}).apply(null,arguments)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.SetMap=void 0;var c=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="_map",r=new Map,(n=s(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,r,a;return t=e,(r=[{key:"has",value:function(e){return this._map.has(e)}},{key:"get",value:function(e){return this._map.get(e)}},{key:"getOne",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}(this.get(e));try{for(n.s();!(t=n.n()).done;){return t.value}}catch(e){n.e(e)}finally{n.f()}}},{key:"add",value:function(e,t){var n=this._map.get(e);return n||this._map.set(e,n=new Set),n.add(t)}},{key:"remove",value:function(e,t){var n=this._map.get(e);if(n){var r=n.delete(t);return n.size||this._map.delete(e),r}}},{key:"values",value:function(){return n(Set,i(i(this._map.values()).map(function(e){return i(e.values())})))}}])&&u(t.prototype,r),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.SetMap=c}()}),require.register("curvature/base/Tag.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var e=n("./Bindable");function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=i.key,void 0,"symbol"===r(a=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),i)}var o,a}var o=Symbol("CurrentStyle"),a=function(e){if(this.node)for(var t in e){var n=String(e[t]);this[o].has(t)&&this[o].get(t)===e[t]||("-"===t[0]?this.node.style.setProperty(t,n):this.node.style[t]=n,void 0!==e[t]?this[o].set(t,e[t]):this[o].delete(t))}},u=function(e){var t=this;return"function"==typeof this[e]?this[e]:this.node&&"function"==typeof this.node[e]?function(){var n;return(n=t.node)[e].apply(n,arguments)}:"style"===e?this.proxy.style:this.node&&e in this.node?this.node[e]:this[e]},s=function(){function t(n,r,i,s,c){var l=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof n){var f=document.createRange().createContextualFragment(n);n=f.firstChild}this.element=e.Bindable.makeBindable(n),this.node=this.element,this.parent=r,this.direct=c,this.ref=i,this.index=s,this.cleanup=[],this[e.Bindable.OnAllGet]=u.bind(this),this[o]=new Map;var v=e.Bindable.make(a.bind(this));return Object.defineProperty(this,"style",{value:v}),this.proxy=e.Bindable.make(this),this.proxy.style.bindTo(function(e,t,n,r){l[o].has(t)&&l[o].get(t)===e||(l.node.style[t]=e,r||void 0===e?l[o].delete(t):l[o].set(t,e))}),this.proxy.bindTo(function(e,t){if("index"!==t)return t in n&&n[t]!==e&&(n[t]=e),!1}),this.proxy}var n,r,s;return n=t,(r=[{key:"attr",value:function(e){for(var t in e)void 0===e[t]?this.node.removeAttribute(t):null===e[t]?this.node.setAttribute(t,""):this.node.setAttribute(t,e[t]);return this}},{key:"remove",value:function(){var t;for(this.node&&this.node.remove(),e.Bindable.clearBindings(this);t=this.cleanup.shift();)t();if(this.clear(),this.node){var n=new Event("cvDomDetached");this.node.dispatchEvent(n),this.node=this.element=this.ref=this.parent=void 0}}},{key:"clear",value:function(){if(this.node)for(var e=new Event("cvDomDetached");this.node.firstChild;)this.node.firstChild.dispatchEvent(e),this.node.removeChild(this.node.firstChild)}},{key:"pause",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}},{key:"listen",value:function(e,t,n){var r=this.node;r.addEventListener(e,t,n);var i=function(){r.removeEventListener(e,t,n)},o=function(){i(),i=function(){return console.warn("Already removed!")}};return this.parent.onRemove(function(){return o()}),o}}])&&i(n.prototype,r),s&&i(n,s),Object.defineProperty(n,"prototype",{writable:!1}),t}();t.Tag=s}()}),require.register("curvature/base/Uuid.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var n;function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.Uuid=void 0,n=Symbol.toPrimitive;var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"uuid",null),i(this,"version",4),t){if(!t||"string"!=typeof t&&!(t instanceof e)||!t.match(/[0-9A-Fa-f]{8}(-[0-9A-Fa-f]{4}){3}-[0-9A-Fa-f]{12}/))throw new Error('Invalid input for Uuid: "'.concat(t,'"'));this.version=n,this.uuid=t}else"function"==typeof crypto.randomUUID?this.uuid=crypto.randomUUID():this.uuid=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)});Object.freeze(this)}var t,o,a;return t=e,(o=[{key:n,value:function(){return this.toString()}},{key:"toString",value:function(){return this.uuid}},{key:"toJson",value:function(){return{version:this.version,uuid:this.uuid}}}])&&r(t.prototype,o),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Uuid=a}()}),require.register("curvature/base/View.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0;var e=n("./Bindable"),r=n("./ViewList"),i=n("./Router"),o=n("./Uuid"),a=n("./Dom"),u=n("./Tag"),s=n("./Bag"),c=n("./RuleSet"),l=n("./Mixin"),f=(n("../mixin/PromiseMixin"),n("../mixin/EventTargetMixin"));function v(e){"@babel/helpers - typeof";return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function b(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,void 0,"symbol"===v(o=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),r)}var i,o}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}(this,n)}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=Symbol("dontParse"),O=Symbol("expandBind"),P=Symbol("uuid"),E=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(A,l.Mixin["with"](f.EventTargetMixin));var b,h,j,E=w(A);function A(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A),(t=E.call(this,n,r))[f.EventTargetMixin.EventTargetParent]=r,Object.defineProperty(S(t),"args",{value:e.Bindable.make(n)}),Object.defineProperty(S(t),P,{value:t.constructor.uuid()}),Object.defineProperty(S(t),"nodesAttached",{value:new s.Bag(function(e,t,n){})}),Object.defineProperty(S(t),"nodesDetached",{value:new s.Bag(function(e,t,n){})}),Object.defineProperty(S(t),"_onRemove",{value:new s.Bag(function(e,t,n){})}),Object.defineProperty(S(t),"cleanup",{value:[]}),Object.defineProperty(S(t),"parent",{value:r}),Object.defineProperty(S(t),"views",{value:new Map}),Object.defineProperty(S(t),"viewLists",{value:new Map}),Object.defineProperty(S(t),"withViews",{value:new Map}),Object.defineProperty(S(t),"tags",{value:e.Bindable.make({})}),Object.defineProperty(S(t),"nodes",{value:e.Bindable.make([])}),Object.defineProperty(S(t),"timeouts",{value:new Map}),Object.defineProperty(S(t),"intervals",{value:[]}),Object.defineProperty(S(t),"frames",{value:[]}),Object.defineProperty(S(t),"ruleSet",{value:new c.RuleSet}),Object.defineProperty(S(t),"preRuleSet",{value:new c.RuleSet}),Object.defineProperty(S(t),"subBindings",{value:{}}),Object.defineProperty(S(t),"templates",{value:{}}),Object.defineProperty(S(t),"eventCleanup",{value:[]}),Object.defineProperty(S(t),"unpauseCallbacks",{value:new Map}),Object.defineProperty(S(t),"interpolateRegex",{value:/(\[\[((?:\$+)?[\w\.\|-]+)\]\])/g}),Object.defineProperty(S(t),"rendered",{value:new Promise(function(e,n){return Object.defineProperty(S(t),"renderComplete",{value:e})})}),t.onRemove(function(){t[f.EventTargetMixin.Parent]&&(t[f.EventTargetMixin.Parent]=null)}),t.controller=S(t),t.template="",t.firstNode=null,t.lastNode=null,t.viewList=null,t.mainView=null,t.preserve=!1,t.removed=!1,t.loaded=Promise.resolve(S(t)),t}return b=A,h=[{key:"_id",get:function(){return this[P]}},{key:"onFrame",value:function(e){var t=this,n=!1,r=function(){n=!0};return requestAnimationFrame(function(){return function r(i){t.removed||n||(t.paused||e(Date.now()),requestAnimationFrame(r))}(Date.now())}),this.frames.push(r),r}},{key:"onNextFrame",value:function(e){return requestAnimationFrame(function(){return e(Date.now())})}},{key:"onIdle",value:function(e){return requestIdleCallback(function(){return e(Date.now())})}},{key:"onTimeout",value:function(e,t){var n=this,r={timeout:null,callback:null,time:e,fired:!1,created:(new Date).getTime(),paused:!1},i=function(){t(),r.fired=!0,n.timeouts.delete(r.timeout)},o=setTimeout(i,e);return r.callback=i,r.timeout=o,this.timeouts.set(r.timeout,r),o}},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t,n=y(this.timeouts);try{for(n.s();!(t=n.n()).done;){var r=p(t.value,2),i=(r[0],r[1]);clearTimeout(i.timeout),this.timeouts.delete(i.timeout)}}catch(e){n.e(e)}finally{n.f()}})},{key:"onInterval",value:function(e,t){var n=setInterval(t,e);return this.intervals.push({timeout:n,callback:t,time:e,paused:!1}),n}},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){for(var t in this.intervals)e===this.intervals[t].timeout&&(clearInterval(this.intervals[t].timeout),delete this.intervals[t])})},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e&&(this.paused=!this.paused),this.paused=e,this.paused){var t,n=y(this.timeouts);try{for(n.s();!(t=n.n()).done;){var r=p(t.value,2),i=(r[0],r[1]);i.fired?this.timeouts.delete(i.timeout):(clearTimeout(i.timeout),i.paused=!0,i.time=Math.max(0,i.time-(Date.now()-i.created)))}}catch(e){n.e(e)}finally{n.f()}for(var o in this.intervals)clearInterval(this.intervals[o].timeout)}else{var a,u=y(this.timeouts);try{for(u.s();!(a=u.n()).done;){var s=p(a.value,2),c=(s[0],s[1]);c.paused&&(c.fired?this.timeouts.delete(c.timeout):(c.timeout=setTimeout(c.callback,c.time),c.paused=!1))}}catch(e){u.e(e)}finally{u.f()}for(var l in this.intervals)this.intervals[l].timeout.paused&&(this.intervals[l].timeout.paused=!1,this.intervals[l].timeout=setInterval(this.intervals[l].callback,this.intervals[l].time));var f,v=y(this.unpauseCallbacks);try{for(v.s();!(f=v.n()).done;){(0,p(f.value,2)[1])()}}catch(e){v.e(e)}finally{v.f()}this.unpauseCallbacks.clear()}var d,b=y(this.viewLists);try{for(b.s();!(d=b.n()).done;){var h=p(d.value,2);h[0];h[1].pause(!!e)}}catch(e){b.e(e)}finally{b.f()}for(var m in this.tags)if(Array.isArray(this.tags[m]))for(var g in this.tags[m])this.tags[m][g].pause(!!e);else this.tags[m].pause(!!e)}},{key:"render",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n instanceof A&&(n=n.firstNode.parentNode),r instanceof A&&(r=r.firstNode),this.firstNode)return this.reRender(n,r);this.dispatchEvent(new CustomEvent("render"));var i=this.template instanceof DocumentFragment?this.template.cloneNode(!0):A.templates.has(this.template),o=i?this.template instanceof DocumentFragment?i:A.templates.get(this.template).cloneNode(!0):document.createRange().createContextualFragment(this.template);if(i||this.template instanceof DocumentFragment||A.templates.set(this.template,o.cloneNode(!0)),this.mainView||this.preRuleSet.apply(o,this),this.mapTags(o),this.mainView||this.ruleSet.apply(o,this),!0===window.devMode?(this.firstNode=document.createComment("Template ".concat(this._id," Start")),this.lastNode=document.createComment("Template ".concat(this._id," End"))):(this.firstNode=document.createTextNode(""),this.lastNode=document.createTextNode("")),(e=this.nodes).push.apply(e,[this.firstNode].concat(d(Array.from(o.childNodes)),[this.lastNode])),this.postRender(n),this.dispatchEvent(new CustomEvent("rendered")),this.dispatchAttach()){if(n){var a=n.getRootNode();if(r?(n.insertBefore(this.firstNode,r),n.insertBefore(this.lastNode,r)):(n.appendChild(this.firstNode),n.appendChild(this.lastNode)),n.insertBefore(o,this.lastNode),0,a.isConnected)this.attached(a,n),this.dispatchAttached(a,n);else{n.addEventListener("cvDomAttached",function e(r){r.target.isConnected&&(t.attached(a,n),t.dispatchAttached(a,n),n.removeEventListener("cvDomAttached",e))})}}return this.renderComplete(this.nodes),this.nodes}}},{key:"dispatchAttach",value:function(){return this.dispatchEvent(new CustomEvent("attach",{cancelable:!0,target:this}))}},{key:"dispatchAttached",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.dispatchEvent(new CustomEvent("attached",{detail:{view:n||this,node:t,root:e,mainView:this}})),this.dispatchDomAttached(n);var r,i=y(this.nodesAttached.items());try{for(i.s();!(r=i.n()).done;){(0,r.value)(e,t)}}catch(e){i.e(e)}finally{i.f()}}},{key:"dispatchDomAttached",value:function(e){var t=this;this.nodes.filter(function(e){return e.nodeType!==Node.COMMENT_NODE}).forEach(function(n){n.matches&&(a.Dom.mapTags(n,!1,function(n,r){n.matches&&n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}}))}),n.dispatchEvent(new CustomEvent("cvDomAttached",{target:n,detail:{view:e||t,mainView:t}})))})}},{key:"reRender",value:function(e,t){if(this.dispatchEvent(new CustomEvent("reRender"),{cancelable:!0,target:this})){var n=new DocumentFragment;if(this.firstNode.isConnected){var r=this.nodesDetached.items();for(var i in r)r[i]()}if(n.append.apply(n,d(this.nodes)),e){t?(e.insertBefore(this.firstNode,t),e.insertBefore(this.lastNode,t)):(e.appendChild(this.firstNode),e.appendChild(this.lastNode)),e.insertBefore(n,this.lastNode),this.dispatchEvent(new CustomEvent("reRendered"),{cancelable:!0,target:this});var o=e.getRootNode();o.isConnected&&(this.attached(o,e),this.dispatchAttached(o,e))}return this.nodes}}},{key:"mapTags",value:function(e){var t=this;a.Dom.mapTags(e,!1,function(e,n){e[k]||(e=e.matches?(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=t.mapInterpolatableTag(e)).matches("[cv-template]")&&t.mapTemplateTag(e)||e).matches("[cv-slot]")&&t.mapSlotTag(e)||e).matches("[cv-prerender]")&&t.mapPrendererTag(e)||e).matches("[cv-link]")&&t.mapLinkTag(e)||e).matches("[cv-attr]")&&t.mapAttrTag(e)||e).matches("[cv-expand]")&&t.mapExpandableTag(e)||e).matches("[cv-ref]")&&t.mapRefTag(e)||e).matches("[cv-on]")&&t.mapOnTag(e)||e).matches("[cv-each]")&&t.mapEachTag(e)||e).matches("[cv-bind]")&&t.mapBindTag(e)||e).matches("[cv-with]")&&t.mapWithTag(e)||e).matches("[cv-if]")&&t.mapIfTag(e)||e).matches("[cv-view]")&&t.mapViewTag(e)||e:t.mapInterpolatableTag(e))!==n.currentNode&&(n.currentNode=e)})}},{key:"mapExpandableTag",value:function(t){var n=t[O];n&&(n(),t[O]=!1);var r=p(e.Bindable.resolve(this.args,t.getAttribute("cv-expand"),!0),2),i=r[0],o=r[1];return t.removeAttribute("cv-expand"),i[o]||(i[o]={}),i[o]=e.Bindable.make(i[o]),this.onRemove(t[O]=i[o].bindTo(function(e,n,r,i,o){i||void 0===e?t.removeAttribute(n,e):null!==e?t.setAttribute(n,e):t.setAttribute(n,"")})),t}},{key:"compileExpandableTag",value:function(t){return function(n){var r=t.cloneNode(!0),i=r.getAttribute("cv-expand"),o=e.Bindable.make(n.args[i]||{});r.removeAttribute("cv-expand");var a=function(){if("name"===u||"type"===u)return"continue";var t=o.bindTo(u,function(e,t){return function(n){e.setAttribute(t,n)}}(r,u));n.onRemove(function(){t(),o.isBound()&&e.Bindable.clearBindings(o)})};for(var u in o)a();return r}}},{key:"mapAttrTag",value:function(e){var t=this.compileAttrTag(e)(this);return e.replaceWith(t),t}},{key:"compileAttrTag",value:function(t){var n=t.getAttribute("cv-attr").split(/[,;]/).map(function(e){return e.split(":")});return t.removeAttribute("cv-attr"),function(r){var i=t.cloneNode(!0),o=function(){var t=n[a][1]||n[a][0],o=p(e.Bindable.resolve(r.args,t,!0),2),u=o[0],s=o[1],c=n[a][0];r.onRemove(u.bindTo(s,function(e,t,n,r){r||void 0===e?i.removeAttribute(c,e):null!==e?i.setAttribute(c,e):i.setAttribute(c,"")}))};for(var a in n)o();return i}}},{key:"mapInterpolatableTag",value:function(t){var n=this,r=this.interpolateRegex;if(t.nodeType===Node.TEXT_NODE){var i=t.nodeValue;if(!this.interpolatable(i))return t;for(var o,a=0,s=function(){var r=o[2],s=!1,c=!1,l=r.split("|"),d=!1;if(l.length>1&&(d=n.stringTransformer(l.slice(1)),r=l[0]),"$$"===r.substr(0,2)&&(s=!0,c=!0,r=r.substr(2)),"$"===r.substr(0,1)&&(s=!0,r=r.substr(1)),"000"===r.substr(0,3))return expand=!0,r=r.substr(3),"continue";var y=i.substring(a,o.index);a=o.index+o[1].length;var b,h=document.createTextNode(y);h[k]=!0,t.parentNode.insertBefore(h,t),(b=s?document.createElement("div"):document.createTextNode(""))[k]=!0;var m=n.args,g=r;if(r.match(/\./)){var w=p(e.Bindable.resolve(n.args,r,!0),2);m=w[0],g=w[1]}if(t.parentNode.insertBefore(b,t),"object"!==v(m))return"break";var S=(m=e.Bindable.make(m)).bindTo(g,function(e,r,i){if(i[r]!==e&&(i[r]instanceof A||i[r]instanceof Node||i[r]instanceof u.Tag)&&(i[r].preserve||i[r].remove()),b.nodeValue="",c&&!(e instanceof A)){var o,a=null!==(o=e)&&void 0!==o?o:"";(e=new A(n.args,n)).template=a}if(d&&(e=d(e)),e instanceof A){e[f.EventTargetMixin.EventTargetParent]=n;var l=function(t,r){e.dispatchAttached(t,r,n)};n.nodesAttached.add(l),e.render(t.parentNode,b);var v=function(){e.preserve||e.remove()};n.onRemove(v),e.onRemove(function(){n.nodesAttached.remove(l),n._onRemove.remove(v)})}else e instanceof Node?(t.parentNode.insertBefore(e,b),n.onRemove(function(){return e.remove()})):e instanceof u.Tag?e.node?(t.parentNode.insertBefore(e.node,b),n.onRemove(function(){return e.remove()})):e.remove():(e instanceof Object&&e.__toString instanceof Function&&(e=e.__toString()),s?b.innerHTML=e:b.nodeValue=e);b[k]=!0});n.onRemove(S)};o=r.exec(i);){var c=s();if("continue"!==c&&"break"===c)break}var l=i.substring(a),d=document.createTextNode(l);d[k]=!0,t.parentNode.insertBefore(d,t),t.nodeValue=""}else if(t.nodeType===Node.ELEMENT_NODE)for(var y=function(){if(!n.interpolatable(t.attributes[b].value))return"continue";for(var i,o=0,a=t.attributes[b].value,u=t.attributes[b],s={},c=[];i=r.exec(a);)c.push(a.substring(o,i.index)),s[i[2]]||(s[i[2]]=[]),s[i[2]].push(c.length),c.push(i[1]),o=i.index+i[1].length;c.push(a.substring(o));var l=function(){var r=n.args,i=f,o=f.split("|"),a=!1,l=f;if(o.length>1&&(a=n.stringTransformer(o.slice(1)),i=o[0]),i.match(/\./)){var v=p(e.Bindable.resolve(n.args,i,!0),2);r=v[0],i=v[1]}s[l];n.onRemove(r.bindTo(i,function(e,r,o,f){for(var v in a&&(e=a(e)),s)for(var d in s[l])c[s[l][d]]=o[v],r===i&&(c[s[l][d]]=e);n.paused?n.unpauseCallbacks.set(u,function(){return t.setAttribute(u.name,c.join(""))}):t.setAttribute(u.name,c.join(""))})),n.onRemove(function(){r.isBound()||e.Bindable.clearBindings(r)})};for(var f in s)l()},b=0;b<t.attributes.length;b++)y();return t}},{key:"mapRefTag",value:function(e){var t=p(e.getAttribute("cv-ref").split(":"),3),n=t[0],r=t[1],i=void 0===r?null:r,o=t[2],a=void 0===o?null:o,s=u.Tag;i&&(s=this.stringToClass(i)),e.removeAttribute("cv-ref"),Object.defineProperty(e,"___tag___",{enumerable:!1,writable:!0}),this.onRemove(function(){e.___tag___=null,e.remove()});var c=this;this.viewList&&(c=this.viewList.parent);var l=new s(e,this,n,void 0,this);for(e.___tag___=l,this.tags[n]=l;c;){var f=this.args[a];if(void 0!==f?(c.tags[n]||(c.tags[n]=[]),c.tags[n][f]=l):c.tags[n]=l,!c.parent)break;c=c.parent}return e}},{key:"mapBindTag",value:function(t){var n=this,r=t.getAttribute("cv-bind"),i=this.args,o=r,s=null;if(r.match(/\./)){var c=p(e.Bindable.resolve(this.args,r,!0),3);i=c[0],o=c[1],s=c[2]}i!==this.args&&(this.subBindings[r]=this.subBindings[r]||[],this.onRemove(this.args.bindTo(s,function(){for(;n.subBindings.length;)n.subBindings.shift()()})));var l=!1;"$"===o.substr(0,1)&&(o=o.substr(1),l=!0);var v=i.bindTo(o,function(e,r,i,o,s){(s instanceof A||s instanceof Node||s instanceof u.Tag)&&s!==e&&s.remove();var c=new CustomEvent("cvAutoChanged",{bubbles:!0});if(["INPUT","SELECT","TEXTAREA"].includes(t.tagName)){var v=t.getAttribute("type");if(v&&"checkbox"===v.toLowerCase())t.checked=!!e,t.dispatchEvent(c);else if(v&&"radio"===v.toLowerCase())t.checked=e==t.value,t.dispatchEvent(c);else if("file"!==v){if("SELECT"===t.tagName){var d=function(){for(var n=0;n<t.options.length;n++){t.options[n].value==e&&(t.selectedIndex=n)}};d(),n.nodesAttached.add(d)}else t.value=null==e?"":e;t.dispatchEvent(c)}}else if(e instanceof A){var p,b=y(t.childNodes);try{for(b.s();!(p=b.n()).done;){p.value.remove()}}catch(e){b.e(e)}finally{b.f()}var h=function(t){e.dispatchDomAttached(n)};n.nodesAttached.add(h),e[f.EventTargetMixin.EventTargetParent]=n,e.render(t),e.onRemove(function(){return n.nodesAttached.remove(h)})}else if(e instanceof Node)t.insert(e);else if(e instanceof u.Tag)t.append(e.node);else if(l){if(t.innerHTML!==e){if(e=String(e),t.innerHTML===e.substring(0,t.innerHTML.length))t.innerHTML+=e.substring(t.innerHTML.length);else{var m,g=y(t.childNodes);try{for(g.s();!(m=g.n()).done;){m.value.remove()}}catch(e){g.e(e)}finally{g.f()}t.innerHTML=e}a.Dom.mapTags(t,!1,function(e){return e[k]=!0})}}else if(t.textContent!==e){var w,S=y(t.childNodes);try{for(S.s();!(w=S.n()).done;){w.value.remove()}}catch(e){S.e(e)}finally{S.f()}t.textContent=e}});i!==this.args&&this.subBindings[r].push(v),this.onRemove(v);var d=t.getAttribute("type"),b=t.getAttribute("multiple"),h=function(n){if(n.target===t)if(d&&"checkbox"===d.toLowerCase())t.checked?i[o]=n.target.getAttribute("value"):i[o]=!1;else if(n.target.matches("[contenteditable=true]"))i[o]=n.target.innerHTML;else if("file"===d&&b){var r=Array.from(n.target.files),a=i[o]||e.Bindable.onDeck(i,o);if(a&&r.length){var u=function(e){if(r[e]!==a[e])return r[e].toJSON=function(){return{name:file[e].name,size:file[e].size,type:file[e].type,date:file[e].lastModified}},a[e]=r[e],"break"};for(var s in r){if("break"===u(s))break}}else i[o]=r}else if("file"===d&&!b&&n.target.files.length){var c=n.target.files.item(0);c.toJSON=function(){return{name:c.name,size:c.size,type:c.type,date:c.lastModified}},i[o]=c}else i[o]=n.target.value};return"file"===d||"radio"===d?t.addEventListener("change",h):(t.addEventListener("input",h),t.addEventListener("change",h),t.addEventListener("value-changed",h)),this.onRemove(function(){"file"===d||"radio"===d?t.removeEventListener("change",h):(t.removeEventListener("input",h),t.removeEventListener("change",h),t.removeEventListener("value-changed",h))}),t.removeAttribute("cv-bind"),t}},{key:"mapOnTag",value:function(e){var t=this;return String(e.getAttribute("cv-on")).split(";").map(function(e){return e.split(":")}).forEach(function(n){var r,i=(n=n.map(function(e){return e.trim()})).length,o=String(n.shift()).trim(),a=String(n.shift()||o).trim(),u=String(n.shift()||"").trim(),s=[],c=/(\w+)(?:\(([$\w\s-'",]+)\))?/.exec(a);c&&(a=c[1].replace(/(^[\s\n]+|[\s\n]+$)/,""),c[2]&&(s=c[2].split(",").map(function(e){return e.trim()}))),s.length||s.push("$event"),o&&1!==i||(o=a);for(var l=t,f=function(){var e=l.controller;return"function"==typeof e[a]?(r=function(){e[a].apply(e,arguments)},"break"):"function"==typeof l[a]?(r=function(){var e;(e=l)[a].apply(e,arguments)},"break"):l.parent?void(l=l.parent):"break"};l;){if("break"===f())break}var v=function(n){var i=s.map(function(r){var i;return Number(r)==r?r:"event"===r||"$event"===r?n:"$view"===r?l:"$controller"===r?controller:"$tag"===r?e:"$parent"===r?t.parent:"$subview"===r?t:r in t.args?t.args[r]:(i=/^['"]([\w-]+?)["']$/.exec(r))?i[1]:void 0});if("function"!=typeof r)throw new Error("".concat(a," is not defined on View object.")+"\nTag:\n"+"".concat(e.outerHTML));r.apply(void 0,d(i))},p={};switch(u.includes("p")?p.passive=!0:u.includes("P")&&(p.passive=!1),u.includes("c")?p.capture=!0:u.includes("C")&&(p.capture=!1),u.includes("o")?p.once=!0:u.includes("O")&&(p.once=!1),o){case"_init":v();break;case"_attach":t.nodesAttached.add(v);break;case"_detach":t.nodesDetached.add(v);break;default:e.addEventListener(o,v,p),t.onRemove(function(){e.removeEventListener(o,v,p)})}return[o,a,s]}),e.removeAttribute("cv-on"),e}},{key:"mapLinkTag",value:function(e){var t=e.getAttribute("cv-link");e.setAttribute("href",t);var n=function(n){n.preventDefault(),"http"!==t.substring(0,4)&&"//"!==t.substring(0,2)?i.Router.go(e.getAttribute("href")):window.open(e.getAttribute("href",t))};return e.addEventListener("click",n),this.onRemove(function(e,t){return function(){e.removeEventListener("click",t),e=void 0,t=void 0}}(e,n)),e.removeAttribute("cv-link"),e}},{key:"compileLinkTag",value:function(e){var t=e.getAttribute("cv-link");return e.removeAttribute("cv-link"),function(n){var r=e.cloneNode(!0);return r.setAttribute("href",t),r}}},{key:"mapPrendererTag",value:function(e){var t=e.getAttribute("cv-prerender"),n=window.prerenderer||navigator.userAgent.match(/prerender/i);return n&&(window.prerenderer=window.prerenderer||!0),("never"===t&&n||"only"===t&&!n)&&e.parentNode.removeChild(e),e}},{key:"mapWithTag",value:function(t){var n=this,r=t.getAttribute("cv-with"),i=t.getAttribute("cv-carry"),o=t.getAttribute("cv-view");t.removeAttribute("cv-with"),t.removeAttribute("cv-carry"),t.removeAttribute("cv-view");var a=o?this.stringToClass(o):A,u=new DocumentFragment;d(t.childNodes).forEach(function(e){return u.appendChild(e)});var s=[];i&&(s=i.split(",").map(function(e){return e.trim()}));var c=this.args.bindTo(r,function(r,i,o,c){for(n.withViews.has(t)&&n.withViews.delete(t);t.firstChild;)t.removeChild(t.firstChild);var l=new a({},n);n.onRemove(function(e){return function(){e.remove()}}(l)),l.template=u;var f=function(){var e=n.args.bindTo(s[d],function(e,t){l.args[t]=e});l.onRemove(e),n.onRemove(function(){e(),l.remove()})};for(var d in s)f();var p=function(){if("object"!==v(r))return"continue";var t=(r=e.Bindable.make(r)).bindTo(y,function(e,t,n,r){r?t in l.args&&delete l.args[t]:l.args[t]=e});l.args.bindTo(y,function(e,t,n,i){i?t in r&&delete r[t]:r[t]=e});n.onRemove(function(){t(),r.isBound()||e.Bindable.clearBindings(r),l.remove()}),l.onRemove(function(){t(),r.isBound()||e.Bindable.clearBindings(r)})};for(var y in r)p();l.render(t),n.withViews.set(t,l)});return this.onRemove(function(){n.withViews.delete(t),c()}),t}},{key:"mapViewTag",value:function(e){var t=this,n=e.getAttribute("cv-view");e.removeAttribute("cv-view");var r=new DocumentFragment;d(e.childNodes).forEach(function(e){return r.appendChild(e)});var i=n.split(":"),o=i.pop()?this.stringToClass(n):A,a=i.shift(),u=new o(this.args,this);return this.views.set(e,u),a&&this.views.set(a,u),this.onRemove(function(n){return function(){n.remove(),t.views.delete(e),t.views.delete(a)}}(u)),u.template=r,u.render(e),e}},{key:"mapEachTag",value:function(t){var n=this,i=t.getAttribute("cv-each"),o=t.getAttribute("cv-view");t.removeAttribute("cv-each"),t.removeAttribute("cv-view");var a=o?this.stringToClass(o):A,u=new DocumentFragment;d(t.childNodes).forEach(function(e){return u.appendChild(e)});var c=p(i.split(":"),3),l=c[0],f=c[1],v=c[2],y=this.args,b=l;if(l.match(/\./)){var h=p(e.Bindable.resolve(this.args,l,!0),2);y=h[0],b=h[1]}var m=y.bindTo(b,function(e,i,o,c,l){e instanceof s.Bag&&(e=e.list),n.viewLists.has(t)&&n.viewLists.get(t).remove();var d=new r.ViewList(u,f,e,n,v,a),p=function(){return d.remove()};n.onRemove(p),d.onRemove(function(){return n._onRemove.remove(p)});var y=n.args.bindTo(function(e,t,n,r){"_id"!==t&&(r?t in d.subArgs&&delete d.subArgs[t]:d.subArgs[t]=e)}),b=d.args.bindTo(function(e,t,r,i,o){"_id"!==t&&"value"!==t&&"___"!==String(t).substring(0,3)&&(i?delete n.args[t]:t in n.args&&(n.args[t]=e))});for(d.onRemove(y),d.onRemove(b),n.onRemove(y),n.onRemove(b);t.firstChild;)t.removeChild(t.firstChild);n.viewLists.set(t,d),d.render(t)});return this.onRemove(m),t}},{key:"mapIfTag",value:function(t){var n=this,r=t,i=r.getAttribute("cv-view"),o=r.getAttribute("cv-if"),u=r.getAttribute("cv-is"),c=!1,l=!1;r.removeAttribute("cv-view"),r.removeAttribute("cv-if"),r.removeAttribute("cv-is");var f=i?this.stringToClass(i):A;"!"===o.substr(0,1)&&(o=o.substr(1),c=!0),"?"===o.substr(0,1)&&(o=o.substr(1),l=!0);var v=new DocumentFragment;d(r.childNodes).forEach(function(e){return v.appendChild(e)});var y=this,b=new DocumentFragment,h=new f(Object.assign({},this.args),y);h.tags.bindTo(function(e,t){return n.tags[t]=e},{removeWith:this}),h.template=v;var m=y.args,g=o;if(o.match(/\./)){var w=p(e.Bindable.resolve(y.args,o,!0),2);m=w[0],g=w[1]}h.render(b);var S=m.bindTo(g,function(e,r){var i=e;l&&(e=null!==e&&void 0!==e),e instanceof s.Bag&&(e=e.list),Array.isArray(e)&&(e=!!e.length),null!==u&&(e=i==u),c&&(e=!e),e?(t.appendChild(b),d(b.childNodes).forEach(function(e){return a.Dom.mapTags(e,!1,function(e,t){e.matches&&e.dispatchEvent(new CustomEvent("cvDomAttached",{target:e,detail:{view:h||n,mainView:n}}))})})):(h.nodes.forEach(function(e){return b.appendChild(e)}),a.Dom.mapTags(b,!1,function(e,t){e.matches&&new CustomEvent("cvDomDetached",{target:e,detail:{view:h||n,mainView:n}})}))},{children:Array.isArray(m[g])});y.onRemove(S);var j=this.args.bindTo(function(e,t,n,r){"_id"!==t&&(r?t in h.args&&delete h.args[t]:h.args[t]=e)}),k=h.args.bindTo(function(e,t,r,i,o){"_id"!==t&&"___"!==String(t).substring(0,3)&&t in n.args&&(i?delete n.args[t]:n.args[t]=e)});return y.onRemove(function(){S(),j(),k(),y._onRemove.remove(S)}),this.onRemove(function(){j(),k(),h.remove(),y!==n&&y.remove()}),t}},{key:"compileIfTag",value:function(t){var n=t.getAttribute("cv-if"),r=!1;t.removeAttribute("cv-if"),"!"===n.substr(0,1)&&(n=n.substr(1),r=!0);var i=new DocumentFragment;return d(t.childNodes).forEach(function(e){return i.appendChild(e.cloneNode(!0))}),function(o){var a=t.cloneNode(),u=new DocumentFragment,s=new A({},o);s.template=i,o.syncBind(s);var c=o.args,l=n;if(n.match(/\./)){var f=p(e.Bindable.resolve(o.args,n,!0),2);c=f[0],l=f[1]}var v=!1,d=c.bindTo(l,function(e,t){if(!v){var n=o.args[l]||r?a:u;return s.render(n),void(v=!0)}Array.isArray(e)&&(e=!!e.length),r&&(e=!e),e?a.appendChild(u):s.nodes.forEach(function(e){return u.appendChild(e)})});o.onRemove(d);var y=function(){c.isBound()||e.Bindable.clearBindings(c)};return s.onRemove(function(){d(),y(),o._onRemove.remove(d),o._onRemove.remove(y)}),a}}},{key:"mapTemplateTag",value:function(e){var t=e.getAttribute("cv-template");return e.removeAttribute("cv-template"),this.templates[t]=function(){return"TEMPLATE"===e.tagName?e.content.cloneNode(!0):new DocumentFragment(e.innerHTML)},this.rendered.then(function(){return e.remove()}),e}},{key:"mapSlotTag",value:function(e){var t=e.getAttribute("cv-slot"),n=this.templates[t];if(!n){for(var r=this;r&&!(n=r.templates[t]);)r=this.parent;if(!n)return void console.error("Template ".concat(t," not found."))}var i=n();for(e.removeAttribute("cv-slot");e.firstChild;)e.firstChild.remove();return e.appendChild(i),e}},{key:"syncBind",value:function(e){var t=this,n=this.args.bindTo(function(t,n,r,i){"_id"!==n&&e.args[n]!==t&&(e.args[n]=t)}),r=e.args.bindTo(function(e,n,r,i,o){if("_id"!==n){var a=e,u=o;a instanceof A&&(a=a.___ref___),u instanceof A&&(u=u.___ref___),a!==u&&u instanceof A&&o.remove(),n in t.args&&(t.args[n]=e)}});this.onRemove(n),this.onRemove(r),e.onRemove(function(){t._onRemove.remove(n),t._onRemove.remove(r)})}},{key:"postRender",value:function(e){}},{key:"attached",value:function(e){}},{key:"interpolatable",value:function(e){return!!String(e).match(this.interpolateRegex)}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.dispatchEvent(new CustomEvent("remove",{detail:{view:this},cancelable:!0}))){var n=function(){for(var t in e.tags)Array.isArray(e.tags[t])?(e.tags[t]&&e.tags[t].forEach(function(e){return e.remove()}),e.tags[t].splice(0)):(e.tags[t]&&e.tags[t].remove(),e.tags[t]=void 0);for(var n in e.nodes)e.nodes[n]&&e.nodes[n].dispatchEvent(new Event("cvDomDetached")),e.nodes[n]&&e.nodes[n].remove(),e.nodes[n]=void 0;e.nodes.splice(0),e.firstNode=e.lastNode=void 0};t?n():requestAnimationFrame(n);var r,i=y(this._onRemove.items());try{for(i.s();!(r=i.n()).done;){var o=r.value;o(),this._onRemove.remove(o)}}catch(e){i.e(e)}finally{i.f()}var a,u=y(this.cleanup);try{for(u.s();!(a=u.n()).done;){var s=a.value;s&&s()}}catch(e){u.e(e)}finally{u.f()}this.cleanup.length=0;var c,l=y(this.viewLists);try{for(l.s();!(c=l.n()).done;){var f=p(c.value,2);f[0];f[1].remove()}}catch(e){l.e(e)}finally{l.f()}this.viewLists.clear();var v,d=y(this.timeouts);try{for(d.s();!(v=d.n()).done;){var b=p(v.value,2),h=(b[0],b[1]);clearTimeout(h.timeout),this.timeouts.delete(h.timeout)}}catch(e){d.e(e)}finally{d.f()}var m,g=y(this.intervals);try{for(g.s();!(m=g.n()).done;){var w=m.value;clearInterval(w)}}catch(e){g.e(e)}finally{g.f()}this.intervals.length=0;var S,j=y(this.frames);try{for(j.s();!(S=j.n()).done;){(0,S.value)()}}catch(e){j.e(e)}finally{j.f()}this.frames.length=0,this.preRuleSet.purge(),this.ruleSet.purge(),this.removed=!0,this.dispatchEvent(new CustomEvent("removed",{detail:{view:this},cancelable:!0}))}}},{key:"findTag",value:function(e){for(var t in this.nodes){var n;if(this.nodes[t].querySelector){if(this.nodes[t].matches(e))return new u.Tag(this.nodes[t],this,void 0,void 0,this);if(n=this.nodes[t].querySelector(e))return new u.Tag(n,this,void 0,void 0,this)}}}},{key:"findTags",value:function(e){var t=this;return this.nodes.filter(function(e){return e.querySelectorAll}).map(function(t){return d(t.querySelectorAll(e))}).flat().map(function(e){return new u.Tag(e,t,void 0,void 0,t)})||[]}},{key:"onRemove",value:function(e){e instanceof Event||this._onRemove.add(e)}},{key:"update",value:function(){}},{key:"beforeUpdate",value:function(e){}},{key:"afterUpdate",value:function(e){}},{key:"stringTransformer",value:function(e){var t=this;return function(n){for(var r in e){for(var i=t,o=e[r];i&&!i[o];)i=i.parent;if(!i)return;n=i[e[r]](n)}return n}}},{key:"stringToClass",value:function(e){if(A.refClasses.has(e))return A.refClasses.get(e);var t=e.split("/"),r=t[t.length-1],i=n(e);return A.refClasses.set(e,i[r]),i[r]}},{key:"preventParsing",value:function(e){e[k]=!0}},{key:"toString",value:function(){return this.nodes.map(function(e){return e.outerHTML}).join(" ")}},{key:"listen",value:function(e,t,n,r){var i=this;if("string"==typeof e&&(r=n,n=t,t=e,e=this),e instanceof A)return this.listen(e.nodes,t,n,r);if(Array.isArray(e))return e.map(function(e){return i.listen(e,t,n,r)}).forEach(function(e){return e()});if(e instanceof u.Tag)return this.listen(e.element,t,n,r);e.addEventListener(t,n,r);var o=function(){return e.removeEventListener(t,n,r)},a=function(){o(),o=function(){}};return this.onRemove(function(){return a()}),a}},{key:"detach",value:function(){for(var e in this.nodes)this.nodes[e].remove();return this.nodes}}],j=[{key:"from",value:function(e){var t=new this(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.template=e,t}},{key:"isView",value:function(){return A}},{key:"uuid",value:function(){return new o.Uuid}}],h&&m(b.prototype,h),j&&m(b,j),Object.defineProperty(b,"prototype",{writable:!1}),A}();t.View=E,Object.defineProperty(E,"templates",{value:new Map}),Object.defineProperty(E,"refClasses",{value:new Map})}()}),require.register("curvature/base/ViewList.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewList=void 0;var e=n("./Bindable"),r=n("./SetMap"),i=n("./Bag");function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){"@babel/helpers - typeof";return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,void 0,"symbol"===u(o=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?o:String(o)),r)}var i,o}var c=function(){function t(n,r,o,a){var s=this,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.removed=!1,this.args=e.Bindable.makeBindable({}),this.args.value=e.Bindable.makeBindable(o||{}),this.subArgs=e.Bindable.makeBindable({}),this.views=[],this.cleanup=[],this.viewClass=l,this._onRemove=new i.Bag,this.template=n,this.subProperty=r,this.keyProperty=c,this.tag=null,this.downDebind=[],this.upDebind=[],this.paused=!1,this.parent=a,this.rendered=new Promise(function(e,t){Object.defineProperty(s,"renderComplete",{configurable:!1,writable:!0,value:e})}),this.willReRender=!1,this.args.___before(function(e,t,n,r,i){"bindTo"!=t&&(s.paused=!0)}),this.args.___after(function(e,t,n,r,i){"bindTo"!=t&&(s.paused=n.length>1,s.reRender())});var f=this.args.value.bindTo(function(e,t,n,r){if(!s.paused){var i=t;if("symbol"!==u(t))if(isNaN(t)&&(i="_"+t),r)for(var o in s.views[i]&&s.views[i].remove(),delete s.views[i],s.views)isNaN(o)?s.views[o].args[s.keyProperty]=o.substr(1):s.views[o].args[s.keyProperty]=o;else s.views[i]?s.views[i]&&s.views[i].args&&(s.views[i].args[s.keyProperty]=t,s.views[i].args[s.subProperty]=e):(cancelAnimationFrame(s.willReRender),s.willReRender=requestAnimationFrame(function(){s.reRender()}))}});this._onRemove.add(f),Object.preventExtensions(this)}var n,a,c;return n=t,(a=[{key:"render",value:function(e){var t,n=this,r=[],i=o(this.views);try{var a=function(){var n=t.value;n.render(e),r.push(n.rendered.then(function(){return n}))};for(i.s();!(t=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}this.tag=e,Promise.all(r).then(function(e){return n.renderComplete(e)}),this.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:this.subProperty,value:this.args.value}}}))}},{key:"reRender",value:function(){var e=this;if(!this.paused&&this.tag){var t=[],n=new r.SetMap;for(var i in this.views){var a=this.views[i],u=a.args[this.subProperty];n.add(u,a),t[i]=a}var s=[],c=new Set;this.downDebind.length&&this.downDebind.forEach(function(e){return e&&e()}),this.upDebind.length&&this.upDebind.forEach(function(e){return e&&e()}),this.upDebind.length=0,this.downDebind.length=0;var l=1/0,f=1/0,v=function(){var t=!1,r=d;if(isNaN(r)?r="_"+d:String(r).length&&(r=Number(r)),void 0!==e.args.value[d]&&n.has(e.args.value[d])){var i=n.getOne(e.args.value[d]);i&&(i.args[e.keyProperty]=d,s[r]=i,c.add(i),t=!0,isNaN(r)||(l=Math.min(l,r),r>0&&(f=Math.min(f,r))),n.remove(e.args.value[d],i))}if(!t){var o={},a=s[r]=new e.viewClass(o,e.parent);isNaN(r)||(l=Math.min(l,r),r>0&&(f=Math.min(f,r))),s[r].template=e.template,s[r].viewList=e,s[r].args[e.keyProperty]=d,s[r].args[e.subProperty]=e.args.value[d],e.upDebind[r]=o.bindTo(e.subProperty,function(t,n,r,i){var a=o[e.keyProperty];i?delete e.args.value[a]:e.args.value[a]=t}),e.downDebind[r]=e.subArgs.bindTo(function(e,t,n,r){r?delete o[t]:o[t]=e});var u=function(){e.upDebind.filter(function(e){return e}).forEach(function(e){return e()}),e.upDebind.length=0},v=function(){e.downDebind.filter(function(e){return e}).forEach(function(e){return e()}),e.downDebind.length=0};a.onRemove(function(){e._onRemove.remove(u),e._onRemove.remove(v),e.upDebind[r]&&e.upDebind[r](),e.downDebind[r]&&e.downDebind[r](),delete e.upDebind[r],delete e.downDebind[r]}),e._onRemove.add(u),e._onRemove.add(v),o[e.subProperty]=e.args.value[d]}};for(var d in this.args.value)v();for(var p in t)c.has(t[p])||t[p].remove();if(Array.isArray(this.args.value)){var y=0===l&&void 0!==s[1]&&s.length>1||f===1/0?l:f;this.rendered=function t(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=s.length-n-1;r>y&&void 0===s[r];)r--;if(r<y)return Promise.resolve();if(s[r]===e.views[r])return s[r]&&!s[r].firstNode?(s[r].render(e.tag,s[r+1]),s[r].rendered.then(function(){return t(Number(n)+1)})):0===n||n%500?t(Number(n)+1):new Promise(function(e){return requestAnimationFrame(function(){return e(t(Number(n)+1))})});return s[r].render(e.tag,s[r+1]),e.views.splice(r,0,s[r]),s[r].rendered.then(function(){return t(n+1)})}()}else{var b,h=[],m=Object.assign({},s),g=function(e){return parseInt(e)===e-0},w=o(Object.keys(s).sort(function(e,t){return g(e)&&g(t)?Math.sign(e-t):g(e)||g(t)?!g(e)&&g(t)?-1:g(e)&&!g(t)?1:void 0:0}));try{var S=function(){var t=b.value;if(delete m[t],s[t].firstNode&&s[t]===e.views[t])return"continue";s[t].render(e.tag),h.push(s[t].rendered.then(function(){return s[t]}))};for(w.s();!(b=w.n()).done;)S()}catch(e){w.e(e)}finally{w.f()}for(var j in m)delete this.args.views[j],m.remove();this.rendered=Promise.all(h)}for(var k in s)isNaN(k)?s[k].args[this.keyProperty]=k.substr(1):s[k].args[this.keyProperty]=k;this.views=Array.isArray(this.args.value)?[].concat(s):s,c.clear(),this.willReRender=!1,this.rendered.then(function(){e.parent.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:e.subProperty,value:e.args.value,tag:e.tag}}})),e.tag.dispatchEvent(new CustomEvent("listRendered",{detail:{detail:{key:e.subProperty,value:e.args.value,tag:e.tag}}}))})}}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var t in this.views)this.views[t].pause(e)}},{key:"onRemove",value:function(e){this._onRemove.add(e)}},{key:"remove",value:function(){for(var t in this.views)this.views[t].remove();var n=this._onRemove.items();for(var r in n)this._onRemove.remove(n[r]),n[r]();for(;this.cleanup.length;)this.cleanup.pop()();for(this.views=[];this.tag&&this.tag.firstChild;)this.tag.removeChild(this.tag.firstChild);this.subArgs&&e.Bindable.clearBindings(this.subArgs),e.Bindable.clearBindings(this.args),this.args.value&&!this.args.value.isBound()&&e.Bindable.clearBindings(this.args.value),this.removed=!0}}])&&s(n.prototype,a),c&&s(n,c),Object.defineProperty(n,"prototype",{writable:!1}),t}();t.ViewList=c}()}),require.register("curvature/input/Axis.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Axis=void 0;var r,i=n("../base/Bindable");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function a(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}r=i.Bindable.NoGetters;var s=function(){function e(t){var n=t.deadZone,i=void 0===n?0:n,o=t.proportional,u=void 0===o||o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,r,!0),a(this,"magnitude",0),a(this,"delta",0),this.proportional=u,this.deadZone=i}var t,n,i;return t=e,(n=[{key:"tilt",value:function(e){this.deadZone&&Math.abs(e)>=this.deadZone?e=(Math.abs(e)-this.deadZone)/(1-this.deadZone)*Math.sign(e):this.deadZone&&Math.abs(e)<this.deadZone&&(e=0),this.delta=Number(e-this.magnitude).toFixed(3)-0,this.magnitude=Number(e).toFixed(3)-0}},{key:"zero",value:function(){this.magnitude=this.delta=0}}])&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Axis=s}()}),require.register("curvature/input/Button.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var r,i=n("../base/Bindable");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function a(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}r=i.Bindable.NoGetters;var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,r,!0),a(this,"active",!1),a(this,"pressure",0),a(this,"delta",0),a(this,"time",0)}var t,n,i;return t=e,(n=[{key:"update",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pressure?this.time++:!this.pressure&&this.time>0?this.time=-1:!this.pressure&&this.time<0&&this.time--,this.time<-1&&-1===this.delta&&(this.delta=0)}},{key:"press",value:function(e){this.delta=Number(e-this.pressure).toFixed(3)-0,this.pressure=Number(e).toFixed(3)-0,this.active=!0,this.time=this.time>0?this.time:0}},{key:"release",value:function(){this.active&&(this.delta=Number(-this.pressure).toFixed(3)-0,this.pressure=0,this.active=!1)}},{key:"zero",value:function(){this.pressure=this.delta=0,this.active=!1}}])&&o(t.prototype,n),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Button=s}()}),require.register("curvature/input/Gamepad.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Gamepad=void 0;var r,i=n("../base/Bindable"),o=n("../base/Mixin"),a=n("../mixin/EventTargetMixin"),u=n("./Axis"),s=n("./Button");function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,i=d(t);if(n){var o=d(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}(this,r)}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}function b(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m={Space:0,Enter:0,NumpadEnter:0,ControlLeft:1,ControlRight:1,ShiftLeft:2,ShiftRight:2,KeyZ:3,KeyQ:4,KeyE:5,Digit1:6,Digit3:7,KeyW:12,KeyA:14,KeyS:13,KeyD:15,KeyH:112,KeyJ:113,KeyK:114,KeyL:115,KeyP:9,Pause:9,Tab:11,ArrowUp:12,ArrowDown:13,ArrowLeft:14,ArrowRight:15,Numpad4:112,Numpad2:113,Numpad8:114,Numpad6:115,Backquote:1010,NumpadAdd:1011,NumpadSubtract:1012,NumpadMultiply:1013,NumpadDivide:1014,Escape:1020};b(Array(12)).map(function(e,t){return m["F".concat(t)]=2e3+t}),r=i.Bindable.NoGetters;var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(y,o.Mixin["with"](a.EventTargetMixin));var t,n,i,d=f(y);function y(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(t.keys,t.deadZone),i=void 0===n?0:n,o=t.gamepad,a=void 0===o?null:o,u=(t.keyboard,t.axisMap),s=void 0===u?null:u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),p(v(e=d.call(this)),r,!0),p(v(e),"axisMap",{12:-1,13:1,14:-0,15:0,112:-2,113:3,114:-3,115:2}),e.deadZone=i,e.gamepad=a,e.index=a.index,e.id=a.id,e.axisMap=s||e.axisMap,Object.defineProperties(v(e),{buttons:{value:{}},pressure:{value:{}},axes:{value:{}},keys:{value:{}}}),e}return t=y,i=[{key:"getPad",value:function(e){var t=this,n=e.index,r=void 0===n?void 0:n,i=e.deadZone,o=void 0===i?0:i,a=e.keys,u=void 0===a?{}:a,s=e.keyboard,c=void 0===s?null:s,l=e.axisMap,f=void 0===l?null:l;if(this.padsConnected.has(r))return this.padsConnected.get(r);var v=new Promise(function(e){addEventListener("gamepadconnected",function(n){n.stopImmediatePropagation();var r=new t({gamepad:n.gamepad,deadZone:o,keys:u,keyboard:c,axisMap:f});t.padsConnected.set(n.gamepad.index,v),e(r)},{once:!0})});return v}}],(n=[{key:"update",value:function(){for(var e in this.buttons){this.buttons[e].update()}}},{key:"rumbleEffect",value:function(e){return this.gamepad.vibrationActuator.playEffect("dual-rumble",e)}},{key:"rumble",value:function(){var e;if(this.gamepad.vibrationActuator.pulse)return(e=this.gamepad.vibrationActuator).pulse.apply(e,arguments);this.rumbleEffect({duration:1e3,strongMagnitude:1,weakMagnitude:1})}},{key:"readInput",value:function(){if(this.gamepad){var e=String(this.gamepad.index),t=this.constructor;t.padsRead.has(e)||(t.padsRead=new Map(Object.entries(navigator.getGamepads())));var n=this.gamepad=t.padsRead.get(e);t.padsRead.delete(e);var r={},i={};if(n)for(var o in n.buttons){var a=n.buttons[o];a.pressed&&(this.press(o,a.value),r[o]=!0)}if(this.keyboard){for(var u in b(Array(10)))r[u]||this.keyboard.getKeyCode(u)>0&&(this.press(u,1),r[u]=!0);for(var c in m)if(!r[c]){var l=m[c];this.keyboard.getKeyCode(c)>0&&(this.press(l,1),r[l]=!0)}}if(n)for(var f in n.buttons){if(!r[f])n.buttons[f].pressed||(this.release(f),i[f]=!0)}if(this.keyboard){for(var v in b(Array(10)))i[v]||r[v]||this.keyboard.getKeyCode(v)<0&&(this.release(v),i[v]=!0);for(var d in m){var p=m[d];i[p]||(r[p]||this.keyboard.getKeyCode(d)<0&&(this.release(p),i[d]=!0))}}var y={};if(n)for(var h in n.axes){var g=n.axes[h];y[h]=!0,this.tilt(h,g)}for(var w in this.axisMap){this.buttons[w]||(this.buttons[w]=new s.Button);var S=this.axisMap[w],j=Math.sign(1/S),k=Math.abs(S);this.buttons[w].active?(y[k]=!0,this.tilt(k,j)):y[k]||this.tilt(k,0)}}}},{key:"tilt",value:function(e,t){this.axes[e]||(this.axes[e]=new u.Axis({deadZone:this.deadZone})),this.axes[e].tilt(t)}},{key:"press",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.buttons[e]||(this.buttons[e]=new s.Button),this.buttons[e].press(t)}},{key:"release",value:function(e){this.buttons[e]||(this.buttons[e]=new s.Button),this.buttons[e].release()}},{key:"serialize",value:function(){var e={};for(var t in this.buttons)e[t]=this.buttons[t].pressure;var n={};for(var r in this.axes)n[r]=this.axes[r].magnitude;return{axes:n,buttons:e}}},{key:"replay",value:function(e){if(e.buttons)for(var t in e.buttons)e.buttons[t]>0?this.press(t,e.buttons[t]):this.release(t);if(e.axes)for(var n in e.axes)e.axes[n].magnitude!==e.axes[n]&&this.tilt(n,e.axes[n])}},{key:"zero",value:function(){for(var e in this.axes)this.axes[e].zero();for(var t in this.buttons)this.buttons[t].zero()}}])&&c(t.prototype,n),i&&c(t,i),Object.defineProperty(t,"prototype",{writable:!1}),y}();t.Gamepad=g,p(g,"padsConnected",new Map),p(g,"padsRead",new Map)}()}),require.register("curvature/mixin/EventTargetMixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EventTargetMixin=void 0;var r,i=n("../base/Mixin");function o(t,n,r){return(n=function(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===e(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=Symbol("EventTargetParent"),v=Symbol("CallHandler"),d=Symbol("Capture"),p=Symbol("Bubble"),y=(Symbol("Target"),Symbol("HandlersBubble")),b=Symbol("HandlersCapture"),h=(o(r={},i.Mixin.Constructor,function(){this[b]=new Map,this[y]=new Map}),o(r,"dispatchEvent",function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n[0];"string"==typeof i&&(i=new CustomEvent(i),n[0]=i),i.cvPath=i.cvPath||[],i.cvTarget=i.cvCurrentTarget=this;var o=this[d].apply(this,n);if(i.cancelable&&(!1===o||i.cancelBubble))return o;var a=[];if(this[b].has(i.type)){var c=this[b].get(i.type),l=s(c);l.forEach(function(e){return e.push(c)}),a.push.apply(a,s(l))}if(this[y].has(i.type)){var h=this[y].get(i.type),m=s(h);m.forEach(function(e){return e.push(h)}),a.push.apply(a,s(m))}a.push([function(){return e[v].apply(e,n)},{},null]);for(var g=0,w=a;g<w.length;g++){var S=u(w[g],3),j=S[0],k=S[1],O=S[2];if(k.once&&O.delete(j),o=j(i),i.cancelable&&!1===o)break}return i.cancelable&&(i.cancelBubble||!1===o)||this[p].apply(this,n),this[f]||Object.freeze(i.cvPath),i.returnValue}),o(r,"addEventListener",function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!0===r&&(r={useCapture:!0});var i=y;r.useCapture&&(i=b),this[i].has(e)||this[i].set(e,new Map),this[i].get(e).set(t,r),r.signal&&r.signal.addEventListener("abort",function(i){return n.removeEventListener(e,t,r)},{once:!0})}),o(r,"removeEventListener",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!0===n&&(n={useCapture:!0});var r=y;n.useCapture&&(r=b),this[r].has(e)&&this[r].get(e).delete(t)}),o(r,d,function(){var e,t=arguments.length<=0?void 0:arguments[0];if(t.cvPath.push(this),this[f]){var n=(e=this[f])[d].apply(e,arguments);if((!t.cancelable||!1!==n&&!t.cancelBubble)&&this[f][b].has(t.type)){t.cvCurrentTarget=this[f];var r,i=t.type,o=this[f][b].get(i),s=a(o);try{for(s.s();!(r=s.n()).done;){var c=u(r.value,2),l=c[0];if(c[1].once&&o.delete(l),n=l(t),t.cancelable&&(!1===n||t.cancelBubble))break}}catch(e){s.e(e)}finally{s.f()}return n}}}),o(r,p,function(){var e,t,n=arguments.length<=0?void 0:arguments[0];if(n.bubbles&&this[f]&&!n.cancelBubble){var r,i;if(!this[f][y].has(n.type))return(r=this[f])[p].apply(r,arguments);n.cvCurrentTarget=this[f];n.type;var o,s=this[f][y].get(n.type),c=a(s);try{for(c.s();!(o=c.n()).done;){var l=u(o.value,2),d=l[0];if(l[1].once&&s.delete(d),i=d(n),n.cancelable&&!1===i)return i}}catch(e){c.e(e)}finally{c.f()}return i=(e=this[f])[v].apply(e,arguments),n.cancelable&&(!1===i||n.cancelBubble)?i:(t=this[f])[p].apply(t,arguments)}}),o(r,v,function(){var e=arguments.length<=0?void 0:arguments[0];if(!e.defaultPrevented){var t="on".concat(e.type[0].toUpperCase()+e.type.slice(1));return"function"==typeof this[t]?this[t](e):void 0}}),r);t.EventTargetMixin=h,Object.defineProperty(h,"Parent",{value:f})}()}),require.register("curvature/mixin/PromiseMixin.js",function(t,n,r){n=e(n,{},"curvature"),function(){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseMixin=void 0;var e,r=n("../base/Mixin");function i(e){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=Symbol("Promise"),u=Symbol("Accept"),s=Symbol("Reject"),c=(o(e={},r.Mixin.Constructor,function(){var e=this;this[a]=new Promise(function(t,n){e[u]=t,e[s]=n})}),o(e,"then",function(){var e;return(e=this[a]).then.apply(e,arguments)}),o(e,"catch",function(){var e;return(e=this[a]).catch.apply(e,arguments)}),o(e,"finally",function(){var e;return(e=this[a]).finally.apply(e,arguments)}),e);t.PromiseMixin=c,Object.defineProperty(c,"Reject",{value:s}),Object.defineProperty(c,"Accept",{value:u})}()}),require.register("arctype/ArcType.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArcType=void 0;var r=t("curvature/base/View"),i=t("curvature/input/Gamepad");function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function f(e,t,n){return t=v(t),function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:String(t)}e.ArcType=function(e){function n(e,r){var o,s,c,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=f(this,n,[e,r]),s=d(o),c="template",l=t("./arctype.html"),(c=y(c))in s?Object.defineProperty(s,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[c]=l;var v=u(Array(26)).map(function(e,t){return String.fromCharCode("a".charCodeAt(0)+t)}),p=u(Array(26)).map(function(e,t){return String.fromCharCode("A".charCodeAt(0)+t)}),b=u(Array(10)).map(function(e,t){return String.fromCharCode("0".charCodeAt(0)+t)}),h='.,"@:/'.split(""),m="!?-&;\\".split(""),g="`*'\"-=[]()~:{}<>^|%$#+".split(""),w=[[].concat(u(v),u(h)),[].concat(u(p),u(m)),[].concat(u(b),u(g))];return o.letters=w[0],o.args.angle="x",document.addEventListener("keydown",function(e){"Enter"===e.key&&o.deactivate(),"Escape"===e.key&&o.deactivate(!1)}),i.Gamepad.getPad({deadZone:.2,axisMap:{}}).then(function(e){requestAnimationFrame(function t(){e.readInput(),e.buttons[4].active&&e.buttons[4].delta&&(o.tags.buffer.focus(),document.execCommand("delete",!1)),e.buttons[5].active&&e.buttons[5].delta&&(o.tags.buffer.focus(),document.execCommand("insertText",!1," ")),e.buttons[10].active&&e.buttons[10].delta&&(o.tags.buffer.focus(),o.tags.buffer.selectionStart--),e.buttons[11].active&&e.buttons[11].delta&&(o.tags.buffer.focus(),o.tags.buffer.selectionEnd++),e.buttons[14].active&&e.buttons[14].delta&&(o.tags.buffer.focus(),o.tags.buffer.selectionEnd=o.tags.buffer.selectionStart,o.tags.buffer.selectionStart--,o.tags.buffer.selectionEnd--),e.buttons[15].active&&e.buttons[15].delta&&(o.tags.buffer.focus(),o.tags.buffer.selectionStart=o.tags.buffer.selectionEnd,o.tags.buffer.selectionStart++),e.buttons[6].active?o.letters=w[1]:e.buttons[7].active?o.letters=w[2]:o.letters=w[0],(e.buttons[8].active||e.buttons[9].active)&&o.deactivate(),o.setButtons();var n=Math.atan2(e.axes[1].magnitude,e.axes[0].magnitude)/Math.PI,r=(6+(Math.round(4*n)+4))%8;o.args.angle=r,e.axes[0].magnitude||e.axes[1].magnitude||(o.args.angle="x",r=void 0);var i=o.findTags(".arctype-wing");for(var s in i){var c=i[s];if(void 0!==s&&Number(s)===r){c.classList.add("arctype-selected");var l,f=a(u(Array(4)).keys());try{for(f.s();!(l=f.n()).done;){var v=l.value;e.buttons[v].active&&e.buttons[v].delta&&c.querySelector(".arctype-button:nth-child(".concat(v+1,")")).click()}}catch(e){f.e(e)}finally{f.f()}}else c.classList.remove("arctype-selected")}requestAnimationFrame(t)})}),o}var o,s,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(n,r.View),o=n,(s=[{key:"onAttach",value:function(){this.setButtons()}},{key:"setButtons",value:function(){for(var e in this.buttons=this.buttons||this.findTags(".arctype-button"),this.buttons){var t=this.buttons[e];t.dataset.buttonId=e,e in this.letters&&(t.querySelector("span").innerText=this.letters[e])}}},{key:"click",value:function(e){if(e&&e.preventDefault(),"buttonId"in e.currentTarget.dataset){var t=Number(e.currentTarget.dataset.buttonId);if(this.tags.buffer.focus(),t in this.letters){var n=this.letters[t];document.execCommand("insertText",!1,n)}}}},{key:"activate",value:function(e){this.args.active||this.tags.buffer.isSameNode(e)||(this.tags.buffer.focus(),this.tags.buffer.node.value=e.value,this.args.active=!0,this.target=e,this.tags.buffer.value="")}},{key:"deactivate",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.target.value=this.tags.buffer.value),this.args.active=!1}},{key:"focus",value:function(e){e.stopPropagation(),e.stopImmediatePropagation()}}])&&l(o.prototype,s),c&&l(o,c),Object.defineProperty(o,"prototype",{writable:!1}),n}()}),require.register("arctype/Config.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;e.Config={}}),require.register("arctype/arctype.html",function(e,t,n){n.exports='<div class = "arctype-host" data-active = "[[active]]">\n\t<div class = "arctype-wing">\n\t\t<div class = "arctype-sector">\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>1</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>2</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>3</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>4</span></div>\n\t\t</div>\n\t</div>\n\t<div class = "arctype-wing">\n\t\t<div class = "arctype-sector">\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>2</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>2</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>3</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>4</span></div>\n\t\t</div>\n\t</div>\n\t<div class = "arctype-wing">\n\t\t<div class = "arctype-sector">\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>3</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>2</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>3</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>4</span></div>\n\t\t</div>\n\t</div>\n\t<div class = "arctype-wing">\n\t\t<div class = "arctype-sector">\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>4</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>2</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>3</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>4</span></div>\n\t\t</div>\n\t</div>\n\t<div class = "arctype-wing">\n\t\t<div class = "arctype-sector">\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>5</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>2</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>3</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>4</span></div>\n\t\t</div>\n\t</div>\n\t<div class = "arctype-wing">\n\t\t<div class = "arctype-sector">\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>6</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>2</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>3</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>4</span></div>\n\t\t</div>\n\t</div>\n\t<div class = "arctype-wing">\n\t\t<div class = "arctype-sector">\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>7</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>2</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>3</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>4</span></div>\n\t\t</div>\n\t</div>\n\t<div class = "arctype-wing">\n\t\t<div class = "arctype-sector">\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>8</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>2</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>3</span></div>\n\t\t\t<div class = "arctype-button" cv-on = "click(event)"><span>4</span></div>\n\t\t</div>\n\t</div>\n\t<button cv-on = "click:deactivate" class = "close">✕</button>\n\t<input cv-ref = "buffer" cv-on = "focus" />\n\t<div class = "help-text">\n\t\t<b>Left stick</b> - Select a group.<br />\n\t\t<b>Face buttons</b> Select a character.<br />\n\t\t<b>D-Pad L/R</b> - Move text cursor left/right.<br />\n\t\t<b>START/Enter</b> - Return to the page.<br />\n\t\t<b>Left Bumper / L1</b> - Backspace<br />\n\t\t<b>Right Bumper / R1</b> - Insert a space<br />\n\t\t<b>Left Trigger / L2</b> - Capitals and symbols.<br />\n\t\t<b>Right Trigger / R2</b> - Numbers and symbols.<br />\n\t</div>\n</div>\n'}),require.register("arctype/initialize.js",function(e,t,n){"use strict";var r=t("curvature/base/View"),i=t("./ArcType"),o=r.View.from('\n\t<div class = "page-wrapper">\n\t\t<h1>ArcType Demo</h1>\n\t\t<p>\n\t\t\tQuicker typing for gamepads.\n\t\t\t<a cv-link = "https://github.com/seanmorris/arctype">GitHub</a> / <a cv-link = "https://npmjs.com/package/@seanmorris/arctype">NPM</a>.\n\t\t</p>\n\t\t<section class = "form">\n\t\t\t<label>Test input: <input /></label>\n\t\t</section>\n\t\t<section class = "footer">&copy; 2021 - 2024 Sean Morris</section>\n\t</div>\n');document.addEventListener("DOMContentLoaded",function(){return o.render(document.body)});var a=new i.ArcType;document.addEventListener("DOMContentLoaded",function(){return a.render(document.body)}),document.addEventListener("focus",function(e){e.target.matches('input[type="text"],textarea,input:not([type])')&&a.activate(e.target)},{capture:!0})}),require.register("___globals___",function(e,t,n){})}(),require("___globals___");
